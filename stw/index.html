<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<title>$NFTFAN Free Claim</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="dark light">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#f5f7fa">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#06070a">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
:root {
  --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', Arial, sans-serif;
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --accent: #6a8dff;
  --accent-rgb: 106 141 255;
  --accent-alt: #ff3db9;
  --text: #f2f6fb;
  --text-dim: #b6c2d6;
  --text-faint: #6f7d92;
  --surface: #11151d;
  --panel: #171d27cc;
  --border: #2d3947;
  --glass-border: #ffffff12;
  --radius-md: 12px;
  --radius-lg: 16px;
  --shadow-1: 0 4px 12px -4px rgba(0,0,0,.5), 0 12px 28px -8px rgba(0,0,0,.6);
  --blur-panel: 22px;
  --gradient-accent: linear-gradient(135deg,#5f83ff,#4d4ffb 40%,#9a40ff 70%,#ff35a6);
  --gradient-bg: radial-gradient(circle at 10% 15%,#1a2230 0%,#0d1219 45%,#07090d 85%);
  --success: #3ddf91;
  --warn: #ffbe3d;
}

* { box-sizing: border-box; }
html,body { height:100%; margin:0; }
body {
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  background: var(--gradient-bg);
  color: var(--text);
  accent-color: var(--accent);
  overflow-x:hidden;
  min-height:100dvh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding: 2rem 1rem;
  font-size: 14px;
}

body::before {
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 85% 10%, #5d82ff28 0%, transparent 40%),
    radial-gradient(circle at 10% 90%, #ff3db922 0%, transparent 45%);
  mix-blend-mode:color-dodge;
  z-index:0;
  animation: bg-glow 15s infinite alternate;
}

@keyframes bg-glow {
  from { opacity: 0.5; transform: scale(1); }
  to { opacity: 1; transform: scale(1.1); }
}

.container {
  width:100%;
  max-width:480px;
  position:relative;
  z-index:1;
  text-align:center;
  animation: slide-up-fade 1s var(--ease-out-expo) .2s both;
}

@keyframes slide-up-fade {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

.header {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

h1 {
  font-size: 2.5rem;
  font-weight: 900;
  background: var(--gradient-accent);
  -webkit-background-clip:text;
  color:transparent;
  filter:drop-shadow(0 6px 12px #00000050);
  margin:0;
}

.badge-live {
  font-size:10px;
  background:var(--accent-alt);
  color:#fff;
  padding:0.25rem 0.5rem;
  border-radius:6px;
  letter-spacing:.5px;
  font-weight:700;
  text-transform: uppercase;
  box-shadow:0 2px 8px -2px #ff3db9a0, 0 0 0 1px #0003;
  animation: pulse 2.5s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); box-shadow:0 2px 8px -2px #ff3db9a0, 0 0 0 1px #0003; }
  50% { transform: scale(1.05); box-shadow:0 4px 16px -2px #ff3db9, 0 0 0 1px #0003; }
}

.stats-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin: 1.5rem 0;
}

.stat-card {
  background: rgba(30, 40, 58, 0.5);
  border-radius: var(--radius-md);
  padding: 1rem;
  box-shadow: 0 4px 12px -6px rgba(0,0,0,0.5);
  border: 1px solid var(--glass-border);
  transition: transform .3s var(--ease-out-expo), background .3s ease;
}
.stat-card:hover {
  transform: translateY(-4px);
  background: rgba(35, 46, 65, 0.7);
}

.stat-value {
  font-size: 1.75rem;
  font-weight: 700;
  margin: 0.25rem 0;
  background: var(--gradient-accent);
  -webkit-background-clip: text;
  color: transparent;
  font-variant-numeric: tabular-nums;
}

.stat-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: var(--text-dim);
  font-weight: 600;
}

.panel {
  position:relative;
  background:var(--panel);
  border:1px solid var(--glass-border);
  border-radius:var(--radius-lg);
  padding:1.5rem;
  box-shadow:var(--shadow-1);
  backdrop-filter:saturate(140%) blur(var(--blur-panel));
  -webkit-backdrop-filter:saturate(140%) blur(var(--blur-panel));
  margin:1rem 0;
}

.panel::before {
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(120deg,#ffffff10 0%,transparent 25%,transparent 75%,#ffffff08 100%);
  pointer-events:none;
  mix-blend-mode:overlay;
  opacity:.55;
  border-radius:inherit;
}

.message {
  font-size:13px;
  margin:0 0 1.5rem;
  color:var(--text-dim);
  line-height:1.5;
}

.actions {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.75rem;
}

@media (min-width: 400px) {
  .actions { grid-template-columns: 1fr 1fr; }
}

button {
  font-family:inherit;
  font-weight:600;
  font-size:14px;
  letter-spacing:.5px;
  line-height:1;
  border:none;
  border-radius:var(--radius-md);
  padding: 0 1.5rem;
  height:50px;
  cursor:pointer;
  background:linear-gradient(135deg,#3552ff,#5d82ff 55%,#7b2dfd);
  color:#fff;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.55rem;
  box-shadow:0 4px 14px -5px rgba(var(--accent-rgb)/.8), 0 2px 4px -2px rgba(0,0,0,.6);
  transition:transform .25s var(--ease-out-expo), box-shadow .25s var(--ease-out-expo), background .25s ease;
  width:100%;
}

button.primary:hover:not(:disabled) {
  background:linear-gradient(135deg,#4660ff,#6a8bff 55%,#8a40ff);
  transform:translateY(-3px);
  box-shadow:0 8px 26px -6px rgba(var(--accent-rgb)/.85), 0 3px 10px -4px rgba(0,0,0,.8);
}

button.secondary {
  background: rgba(255,255,255,0.08);
  box-shadow: 0 2px 8px -4px rgba(0,0,0,.4);
}

button.secondary:hover:not(:disabled) {
  background: rgba(255,255,255,0.15);
  transform: translateY(-3px);
  box-shadow: 0 6px 16px -6px rgba(0,0,0,.6);
}

button:active:not(:disabled) {
  transform:translateY(0);
  transition-duration:.1s;
}

button:disabled {
  opacity:.5;
  cursor:not-allowed;
  filter:saturate(.3);
  transform:none !important;
  box-shadow: none !important;
}

.toast {
  position:fixed;
  z-index:100;
  bottom:1.5rem;
  max-width:min(360px,90vw);
  background:#121c27f2;
  backdrop-filter:blur(22px) saturate(160%);
  -webkit-backdrop-filter:blur(22px) saturate(160%);
  border:1px solid #ffffff20;
  box-shadow:0 12px 40px -12px rgba(0,0,0,.6), 0 0 0 1px #ffffff08;
  padding: 1rem;
  border-radius:var(--radius-lg);
  font-size:13px;
  line-height:1.4;
  opacity:0;
  transform:translateY(14px) scale(.96);
  pointer-events:none;
  transition:opacity .5s var(--ease-out-expo), transform .55s var(--ease-out-expo);
}
.toast.show {
  opacity:1;
  transform:translateY(0) scale(1);
  pointer-events:auto;
}

.loading {
  display:inline-block;
  width:18px;
  height:18px;
  border:2px solid rgba(255,255,255,0.3);
  border-radius:50%;
  border-top-color:#fff;
  animation:spin 1s ease-in-out infinite;
  margin-right:8px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.cooldown-box {
  margin-top: 1rem;
  background: rgba(30, 40, 58, 0.6);
  border-radius: var(--radius-md);
  padding: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--warn);
  font-weight: 600;
  font-size: 12px;
}

.countdown {
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  padding: 0.2rem 0.5rem;
  margin-left: 0.5rem;
  background: rgba(0,0,0,0.2);
  border-radius: 6px;
  color: #fff;
}

#fallbackCopyArea {
  position:absolute;
  left:-9999px;
  top:-9999px;
}

/* Community Section */
.community-panel {
  margin-top: 2rem;
}
.community-panel h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dim);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin: 0 0 1rem;
}
.community-links {
  display: flex;
  justify-content: center;
  gap: 1rem;
}
.community-link {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 50px;
  height: 50px;
  color: var(--text-dim);
  background: rgba(30, 40, 58, 0.6);
  border-radius: var(--radius-md);
  border: 1px solid var(--glass-border);
  text-decoration: none;
  transition: transform .3s var(--ease-out-expo), color .3s ease, background .3s ease;
}
.community-link svg {
  width: 24px;
  height: 24px;
  fill: currentColor;
}
.community-link:hover {
  transform: translateY(-4px);
  color: #fff;
  background: rgba(40, 52, 72, 0.8);
}


/* Hidden links that will be triggered programmatically */
.app-links {
  position: absolute;
  top: -9999px;
  left: -9999px;
  visibility: hidden;
}
</style>
</head>
<body>
<div class="container">
  <div class="header" style="animation-delay: 0.3s;" >
    <h1>$NFTFAN</h1>
    <span class="badge-live">LIVE</span>
  </div>
  
  <div class="stats-row" style="animation-delay: 0.4s;">
    <div class="stat-card">
      <div class="stat-label">Tweets Shared</div>
      <div class="stat-value" id="tweetsShared">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Tokens Earned</div>
      <div class="stat-value" id="tokensEarned">0 TRILLION</div>
    </div>
  </div>
  
  <div class="panel" style="animation-delay: 0.5s;">
    <div class="message">
      Share a tweet to earn <strong>1 Trillion $NFTFAN</strong> tokens.
      <br>
      You can share once every 20 minutes.
    </div>
    
    <div class="actions">
      <button id="shareBtn" type="button" class="primary">Share Tweet</button>
      <button id="claimBtn" type="button" class="secondary">Claim Tokens</button>
    </div>
    
    <div id="cooldownBox" class="cooldown-box" style="display:none;">
      Next share available in: <span id="countdownTimer" class="countdown">20:00</span>
    </div>
  </div>

  <div class="community-panel panel" style="animation-delay: 0.6s;">
      <h3>Join our Community</h3>
      <div class="community-links">
        <a href="https://discord.gg/SwGjWMd2d9" target="_blank" rel="noopener noreferrer" class="community-link" aria-label="Join our Discord">
          <svg viewBox="0 0 24 24"><path d="M20.317 4.36981C18.7915 3.59698 17.1652 3.00656 15.4699 2.59981C15.421 2.76062 15.3674 2.92824 15.3129 3.09267C13.8419 2.82981 12.3157 2.82981 10.8447 3.09267C10.7901 2.92824 10.7366 2.76062 10.6877 2.59981C8.99237 3.00656 7.36612 3.59698 5.84062 4.36981C2.3965 9.03267 1.48803 13.5611 2.0533 17.9526C3.78562 19.262 5.82323 20.129 7.99923 20.6026C8.2163 20.2338 8.41362 19.8526 8.58823 19.462C7.8183 19.1426 7.08612 18.752 6.4133 18.2811C6.54473 18.1882 6.67147 18.092 6.79403 17.9926C11.3992 20.019 16.7632 20.019 21.3683 17.9926C21.4909 18.092 21.6176 18.1882 21.7491 18.2811C21.0763 18.752 20.3441 19.1426 19.5742 19.462C19.7488 19.8526 19.9461 20.2338 20.1632 20.6026C22.3392 20.129 24.3768 19.262 26.1091 17.9526C26.7449 12.9426 25.1332 8.34267 20.317 4.36981ZM9.68003 15.632C8.51442 15.632 7.5513 14.6226 7.5513 13.3926C7.5513 12.1626 8.5013 11.1532 9.68003 11.1532C10.8588 11.1532 11.8219 12.1626 11.8088 13.3926C11.8088 14.6226 10.8588 15.632 9.68003 15.632ZM18.4888 15.632C17.3232 15.632 16.3601 14.6226 16.3601 13.3926C16.3601 12.1626 17.3101 11.1532 18.4888 11.1532C19.6676 11.1532 20.6307 12.1626 20.6176 13.3926C20.6176 14.6226 19.6676 15.632 18.4888 15.632Z"/></svg>
        </a>
        <a href="https://x.com/i/communities/1648665563332263936" target="_blank" rel="noopener noreferrer" class="community-link" aria-label="Join our X Community">
          <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        </a>
        <a href="https://t.me/nftfanstokens" target="_blank" rel="noopener noreferrer" class="community-link" aria-label="Join our Telegram Group">
          <svg viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zM5.538 11.42l11.13-4.34A.73.73 0 0 1 17.5 7.5c.06.2.02.41-.11.54l-2.9 2.81-3.62 9.38a.72.72 0 0 1-1.35.15l-1.84-5.8-3.41-1.03a.72.72 0 0 1-.39-1.29z"/></svg>
        </a>
      </div>
  </div>

</div>

<!-- Hidden links for app opening -->
<div class="app-links">
  <a id="twitterAppLink" href=""></a>
  <a id="twitterWebLink" href=""></a>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>
<textarea id="fallbackCopyArea" aria-hidden="true" tabindex="-1"></textarea>

<script type="module">
/* Firebase integration */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, get, update, serverTimestamp, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyC6wYBu-KOXkDmB-84_7OPtY71zBX4FzRY",
  authDomain: "newnft-47bd7.firebaseapp.com",
  databaseURL: "https://newnft-47bd7-default-rtdb.firebaseio.com",
  projectId: "newnft-47bd7",
  storageBucket: "newnft-47bd7.firebasestorage.app",
  messagingSenderId: "172043823738",
  appId: "1:172043823738:web:daf1fcfb7862d7d8f029c3",
  measurementId: "G-8VB3DYRNXR"
};
initializeApp(firebaseConfig);
const db = getDatabase();

/* Constants */
const COOLDOWN_MINUTES = 20;
const COOLDOWN_MS = COOLDOWN_MINUTES * 60 * 1000;
const TOKENS_PER_SHARE = 1; // 1 trillion

/* Elements */
const shareBtn = document.getElementById('shareBtn');
const claimBtn = document.getElementById('claimBtn');
const toastEl = document.getElementById('toast');
const fallbackCopyArea = document.getElementById('fallbackCopyArea');
const tweetsSharedEl = document.getElementById('tweetsShared');
const tokensEarnedEl = document.getElementById('tokensEarned');
const cooldownBox = document.getElementById('cooldownBox');
const countdownTimer = document.getElementById('countdownTimer');
const twitterAppLink = document.getElementById('twitterAppLink');
const twitterWebLink = document.getElementById('twitterWebLink');

/* Detect device */
const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
const isAndroid = /Android/.test(navigator.userAgent);
const isMobile = isIOS || isAndroid;

/* User state */
let tweetsShared = 0;
let tokensEarned = 0;
let lastShareTime = 0;
let countdownInterval = null;

/* Server Time Offset */
let serverOffset = 0;
onValue(ref(db, '.info/serverTimeOffset'), s => serverOffset = s.val() || 0);
const nowServer = () => Date.now() + serverOffset;

/* Update UI based on state */
function updateUI() {
  tweetsSharedEl.textContent = tweetsShared;
  tokensEarnedEl.textContent = tokensEarned + ' TRILLION';
  claimBtn.disabled = tokensEarned === 0;
}

/* Load user state from localStorage */
function loadUserState() {
  const savedState = localStorage.getItem('nftfan_user_state');
  if (savedState) {
    try {
      const state = JSON.parse(savedState);
      tweetsShared = state.tweetsShared || 0;
      tokensEarned = state.tokensEarned || 0;
      lastShareTime = state.lastShareTime || 0;
      
      updateUI();
      checkCooldown();
    } catch (e) {
      console.error('Error loading user state:', e);
    }
  }
  updateUI(); // Also run on first load
}

/* Save user state to localStorage */
function saveUserState() {
  const state = {
    tweetsShared,
    tokensEarned,
    lastShareTime
  };
  localStorage.setItem('nftfan_user_state', JSON.stringify(state));
}

/* Check cooldown status */
function checkCooldown() {
  if (!lastShareTime) {
    cooldownBox.style.display = 'none';
    shareBtn.disabled = false;
    if (countdownInterval) {
      clearInterval(countdownInterval);
      countdownInterval = null;
    }
    return;
  }
  
  const nextShareTime = lastShareTime + COOLDOWN_MS;
  const now = nowServer();
  
  if (now < nextShareTime) {
    startCountdown(nextShareTime);
  } else {
    cooldownBox.style.display = 'none';
    shareBtn.disabled = false;
    if (countdownInterval) {
      clearInterval(countdownInterval);
      countdownInterval = null;
    }
  }
}

/* Start countdown timer */
function startCountdown(endTime) {
  cooldownBox.style.display = 'flex';
  shareBtn.disabled = true;
  
  function updateTimer() {
    const now = nowServer();
    const remaining = Math.max(0, endTime - now);
    
    if (remaining <= 0) {
      clearInterval(countdownInterval);
      countdownInterval = null;
      cooldownBox.style.display = 'none';
      shareBtn.disabled = false;
      return;
    }
    
    const minutes = Math.floor(remaining / 60000);
    const seconds = Math.floor((remaining % 60000) / 1000);
    countdownTimer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
  }
  
  if (countdownInterval) {
    clearInterval(countdownInterval);
  }
  
  updateTimer();
  countdownInterval = setInterval(updateTimer, 1000);
}

/* Helpers */
function showToast(msg, t=3200) {
  toastEl.textContent = msg;
  toastEl.classList.add('show');
  setTimeout(() => toastEl.classList.remove('show'), t);
}

/* Tweet building & sharing */
function buildTweet(_groupKey, groupData) {
  const usernames = (groupData.usernames || []).filter(Boolean);
  let listPart = '';
  if (usernames.length === 1) listPart = usernames[0];
  else if (usernames.length === 2) listPart = `${usernames[0]} and ${usernames[1]}`;
  else listPart = `${usernames[0]}, ${usernames[1]} and ${usernames[2]}`;
  return `Follow @nftfanstoken to claim, click the link nftfanstoken.com/nftzz to claim your tokens. Winners are: ${listPart}. I used this link to invite you: https://www.nftfanstoken.com/sharetweets/`;
}

async function shareToTwitter(tweet) {
  const encodedTweet = encodeURIComponent(tweet);
  
  if (isMobile) {
    let appOpened = false;
    if (isIOS) {
      twitterAppLink.href = `twitter://post?message=${encodedTweet}`;
    } else if (isAndroid) {
      twitterAppLink.href = `intent://post?message=${encodedTweet}#Intent;scheme=twitter;package=com.twitter.android;end`;
    }
    twitterWebLink.href = `https://twitter.com/intent/tweet?text=${encodedTweet}`;
    
    if (twitterAppLink.href) {
      const beforeOpen = Date.now();
      twitterAppLink.click();
      setTimeout(() => {
        if (Date.now() - beforeOpen < 1500) {
          twitterWebLink.click();
          showToast('Opening web composer...');
        } else {
          appOpened = true;
        }
      }, 1000);
    } else {
      twitterWebLink.click();
    }
    return;
  }
  
  const webIntentUrl = `https://twitter.com/intent/tweet?text=${encodedTweet}`;
  let win = null;
  try { win = window.open(webIntentUrl, '_blank', 'noopener'); } 
  catch(e) { win = null; }
  
  if (!win) {
    try {
      await navigator.clipboard.writeText(tweet);
      showToast('Popup blocked. Tweet copied — paste into X.');
    } catch(e) {
      fallbackCopyArea.value = tweet;
      fallbackCopyArea.select();
      document.execCommand('copy');
      showToast('Popup blocked. Copied (fallback).');
    }
  } else {
    showToast('Opened X compose.');
  }
}

/* Group fetching and claiming */
async function fetchAvailableGroup() {
  const allGroupsSnap = await get(ref(db, 'groups'));
  const groupsObj = allGroupsSnap.exists() ? allGroupsSnap.val() : {};
  const keys = Object.keys(groupsObj)
    .sort((a, b) => (parseInt(a.replace('group_', '')) || 0) - (parseInt(b.replace('group_', '')) || 0));
  
  for (const key of keys) {
    const group = groupsObj[key];
    if (group.status === 'pending') {
      return { key, data: group };
    }
  }
  return null;
}

async function claimAndShareTweet() {
  const now = nowServer();
  if (lastShareTime && now - lastShareTime < COOLDOWN_MS) {
    const remaining = (lastShareTime + COOLDOWN_MS) - now;
    const minutes = Math.floor(remaining / 60000);
    const seconds = Math.floor((remaining % 60000) / 1000);
    showToast(`Please wait ${minutes}m ${seconds}s before sharing again`);
    return;
  }
  
  shareBtn.disabled = true;
  shareBtn.innerHTML = '<span class="loading"></span> Sharing...';
  
  try {
    const availableGroup = await fetchAvailableGroup();
    
    if (!availableGroup) {
      showToast('No available tweets to share right now.');
      shareBtn.disabled = false;
      shareBtn.textContent = 'Share Tweet';
      return;
    }
    
    const handle = '@user' + Math.floor(Math.random() * 10000);
    
    const updates = {};
    updates[`groups/${availableGroup.key}/status`] = 'in_progress';
    updates[`groups/${availableGroup.key}/reserver`] = handle;
    await update(ref(db), updates);
    
    const tweet = buildTweet(availableGroup.key, availableGroup.data);
    await shareToTwitter(tweet);
    
    await update(ref(db), { [`groups/${availableGroup.key}/status`]: 'done' });
    
    tweetsShared++;
    tokensEarned += TOKENS_PER_SHARE;
    lastShareTime = nowServer();
    
    updateUI();
    saveUserState();
    
    showToast(`Success! Earned 1 Trillion $NFTFAN.`);
    checkCooldown();
    
  } catch (error) {
    console.error('Error:', error);
    showToast('Something went wrong. Please try again.');
    shareBtn.disabled = false;
  } finally {
    if (!shareBtn.disabled) {
      shareBtn.textContent = 'Share Tweet';
    }
  }
}

function handleClaim() {
    window.open('https://www.nftfanstoken.com/nftzz/', '_blank');
}

/* Event listeners */
shareBtn.addEventListener('click', claimAndShareTweet);
claimBtn.addEventListener('click', handleClaim);


/* Initialize */
loadUserState();
</script>
</body>
</html>
