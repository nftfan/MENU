
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://raw.githubusercontent.com/nftfan/MENU/main/grants/FANS%20(1).png" type="image/png">
    <title>Worldgram Verification</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>

    <!-- Twitter Card metadata -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Worldgram Verification">
    <meta name="twitter:description" content="Verify your Worldgram ID.">
    <meta name="twitter:image" content="https://github.com/nftfan/MENU/blob/main/Worldgram/Worldgram.png?raw=true">
    <meta name="twitter:url" content="https://www.nftfanstoken.com/Worldgram/verify/">
    
   <style>
/* Importing Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Poppins:wght@600&display=swap');

body {
    font-family: 'Roboto', sans-serif;
    background-color: #121212; /* Dark background for a sleek look */
    color: #e0e0e0; /* Light text for readability */
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
    min-width: 350px;
}

header {
    width: 100%;
    background-color: #bc0000; /* Slightly lighter dark color */
    color: #e0e0e0;
    padding: 20px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-bottom: 1px solid #333;
}

header h1 {
    font-family: 'Poppins', sans-serif;
    font-size: 12px;
    margin: 0;
    color: #e0e0e0;
    padding: 10px 20px;
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.6);
}

.header-content {
    margin-top: 10px;
    text-align: center;
}

.wallet-info {
    display: flex;
    flex-direction: column;
    align-items: center;
}

#connectWalletButton {
    display: flex;
    align-items: center;
    background-color: #ffd662; /* Dark button background */
    color: #000000;
    padding: 10px 20px;
    font-size: 14px; /* Smaller font size */
    border: 1px solid #444; /* Subtle border */
    border-radius: 50px;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.3s;
    position: relative;
    overflow: hidden;
    min-width: 150px;
}

#connectWalletButton img {
    position: absolute;
    left: 10px;
    width: 24px;
    height: 24px;
}

#connectWalletButton:hover {
    background-color: #444; /* Slightly lighter dark */
    transform: scale(1.02);
}

#walletAddress {
    font-size: 12px;
    color: #e0e0e0;
    margin: 5px 0;
    background: rgba(255, 255, 255, 0.1);
    padding: 5px 10px;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
}

footer {
    width: 100%;
    text-align: center;
    background-color: #bc0000;
    color: #e0e0e0;
    padding: 15px 0;
    margin-top: auto;
    border-top: 1px solid #333;
}

.container {
    position: relative; /* Make sure the container is a positioning context for its children */
    background: #1c1c1c; /* Uniform dark background */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    width: 350px;
    margin: 20px;
    box-sizing: border-box;
}

h1 {
    font-family: 'Poppins', sans-serif;
    font-size: 12px;
    margin-bottom: 10px;
    color: #e0e0e0;
}

.description {
    font-size: 11px;
    color: #e0e0e0;
    margin-bottom: 20px;
    background: rgba(255, 255, 255, 0.05);
    padding: 10px;
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.6);
}

#nftImage {
    width: 100%;
    height: auto;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
    position: relative; /* Make sure the image is positioned relative to its container */
}

.image-title {
    position: absolute;
    bottom: 0;
    left: 0;
    background: rgba(0, 0, 0, 0.6); /* Soft black transparent background */
    color: #e0e0e0; /* Light text color for contrast */
    font-family: 'Poppins', sans-serif;
    font-size: 12px;
    padding: 5px;
    border-top-right-radius: 6px; /* Rounded corner to match container style */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.6);
}


.mint-section {
    display: flex;
    align-items: center;
    margin-top: 10px;
}

.mint-section label {
    color: #e0e0e0;
    margin-right: 10px;
}

.mint-section input {
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #444;
    margin-right: 10px;
    max-width: 80px;
    background-color: #333;
    color: #e0e0e0;
}

#mintButton {
    padding: 10px 20px;
    font-size: 12px;
    border: 1px solid #444;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
    background-color: #333; /* Dark button background */
    color: #e0e0e0;
    font-weight: 500;
    flex-grow: 1;
}

#mintButton.enabled {
    background-color: #38ccbe;
    color: #e0e0e0;
}

#mintButton.enabled:hover {
    background-color: #555;
}

#statusIcons {
    display: none;
    margin-top: 10px;
    text-align: center;
}

#statusIcons img {
    width: 40px;
    height: 40px;
    border-radius: 6px;
    margin: 0 5px;
}

#statusIcons p {
    color: #e0e0e0;
    font-size: 12px;
    margin-top: 5px;
}

#processingIcon, #completedIcon, #errorIcon {
    display: none;
}

.tab-button {
    display: inline-block;
    text-decoration: none;
    color: #e0e0e0;
    background-color: #5a93f5;
    border: 1px solid #444;
    border-radius: 50px;
    padding: 8px 16px;
    font-size: 12px;
    font-weight: 500;
    text-align: center;
    transition: background-color 0.3s, border-color 0.3s, transform 0.2s;
    margin-top: 10px;
}

.tab-button:hover {
    background-color: #444;
    color: #e0e0e0;
    border-color: #555;
    transform: scale(1.02);
}

.tab-button:active {
    background-color: #555;
    border-color: #666;
}

#logo-container svg {
  width: 100px;
  height: auto;
}

@media only screen and (max-width: 768px) {
  #logo-container svg {
    width: 150px;
    height: auto;
  }  
}



    </style>
</head>
<body>
    <header>
        <h1>NFTFANS 1KT ART</h1>
		
        <div class="header-content">
            <div class="wallet-info">
                <button id="connectWalletButton">
                   
                    <strong>Connect Wallet</strong>
                </button>
                <p id="walletAddress">Not connected <br> Switch to Polygon Network in your wallet </p>
				<p class="description">You will get this NFT + 1KT $NFTFAN Tokens! <br> We recommend Metamask wallet. <br> Tokens will show up after 5 min.</p>
				<h1> Price: 1 $MATIC </h1>
                <a href="https://metamask.app.link/dapp/https://www.nftfanstoken.com/1ktd" target="_blank" class="tab-button">Open in MetaMask</a>
            </div>
        </div>
		<div class="mint-section">
            <label for="tokenId"> <strong> Enter Token ID: </strong> </label>
            <input type="number" id="tokenId" placeholder="Token ID">
            <button id="mintButton" disabled>Mint Now</button>
        </div>
	<div id="statusIcons">
            <img id="processingIcon" src="https://raw.githubusercontent.com/nftfan/nftz/main/cloud.gif" alt="Processing">
            <img id="completedIcon" src="https://raw.githubusercontent.com/nftfan/nftz/main/confetti.gif" alt="Completed">
            <img id="errorIcon" src="https://raw.githubusercontent.com/nftfan/nftz/main/no-violence.gif" alt="Error">
            <p id="statusMessage"></p>
        </div>	 
    </header>
	 

	
    
    <footer>
        <p>Â© 2023 NFTFANS - All Rights Reserved</p>
    </footer>

    <script>
    const contractAddress = '0x3e6E1F0e21A6521eE69baceEBA22e7CeCe42eb1c'; 
    const abi = [
        "function buyNFT(uint256 _tokenId, uint256 _amount) external payable",
        "function tokenPrice() external view returns (uint256)"
    ];

    let provider;
    let contract;
    let signer;

    async function connectWallet() {
    if (window.ethereum && window.ethereum.isMetaMask) {
        try {
            // Initialize provider and signer
            provider = new ethers.providers.Web3Provider(window.ethereum);
            await provider.send('eth_requestAccounts', []);
            signer = provider.getSigner();
            const address = await signer.getAddress();
            
            // Update wallet address display and other UI elements
            updateUIOnSuccess(address);

            // Initialize contract
            contract = new ethers.Contract(contractAddress, abi, signer);

            // Optionally handle tab-button
            const openInMetaMaskButton = document.querySelector('.tab-button');
            if (openInMetaMaskButton) {
                openInMetaMaskButton.style.display = 'none'; // Hide the button
            }

        } catch (error) {
            handleConnectionError(error);
        }
    } else {
        alert('MetaMask is not installed. Please install MetaMask and try again.');
    }
}

function updateUIOnSuccess(address) {
    document.getElementById('walletAddress').innerText = `Connected: ${address}`;
    const mintButton = document.getElementById('mintButton');
    mintButton.classList.add('enabled');
    mintButton.disabled = false;
    document.getElementById('statusIcons').style.display = 'none';
    const connectWalletButton = document.getElementById('connectWalletButton');
    connectWalletButton.innerHTML = '<strong>Connected</strong>';
    connectWalletButton.style.backgroundColor = '#238636'; // Change button color
}

function handleConnectionError(error) {
    console.error('Error connecting wallet:', error);
    document.getElementById('walletAddress').innerText = 'Failed to connect wallet. Check the console for details.';
    alert('Failed to connect wallet. Check the console for details.');
}




   async function handleMint() {
    const tokenId = parseInt(document.getElementById('tokenId').value, 10);
    const amount = 1; // Assuming you want to mint only 1 NFT per transaction.

    if (isNaN(tokenId) || tokenId <= 0) {
        alert('Please enter a valid Token ID.');
        return;
    }

    try {
        // Show status icons and initial message
        console.log('Showing status icons');
        const statusIcons = document.getElementById('statusIcons');
        statusIcons.style.display = 'block'; 
        document.getElementById('processingIcon').style.display = 'inline'; 
        document.getElementById('completedIcon').style.display = 'none'; 
        document.getElementById('errorIcon').style.display = 'none'; 
        document.getElementById('statusMessage').innerText = 'Processing your transaction...Wait 30s';

        const pricePerToken = await contract.tokenPrice();
        const totalPrice = pricePerToken.mul(amount);

        // Initiate transaction
        const tx = await contract.buyNFT(tokenId, amount, { value: totalPrice });

        // Wait for transaction confirmation
        await tx.wait();  

        // Update status
        console.log('Transaction completed');
        document.getElementById('processingIcon').style.display = 'none'; 
        document.getElementById('completedIcon').style.display = 'inline'; 
        document.getElementById('statusMessage').innerText = 'Transaction successful!';

        // Hide status icons after a short delay
        setTimeout(() => {
            statusIcons.style.display = 'none';
        }, 3000);
    } catch (error) {
        console.error('Transaction error:', error);
        console.log('Transaction failed');
        document.getElementById('processingIcon').style.display = 'none'; 
        document.getElementById('completedIcon').style.display = 'none'; 
        document.getElementById('errorIcon').style.display = 'inline'; 
        document.getElementById('statusMessage').innerText = 'Transaction failed!';
        
        // Hide status icons after a short delay
        setTimeout(() => {
            document.getElementById('statusIcons').style.display = 'none';
        }, 3000);
    }
}




    function init() {
        document.getElementById('connectWalletButton').addEventListener('click', connectWallet);
        document.getElementById('mintButton').addEventListener('click', handleMint);
    }

    init();

	    </script>

</body>
</html>


