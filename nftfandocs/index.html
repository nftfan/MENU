<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>NFT Fans Token – Documents</title>
  <meta name="description" content="Official NFT Fans Token document portal. Access whitepapers, guides, and publications from the NFT Fans Token team."/>

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

  <style>
    :root {
      --cyan: #0bbfc9;
      --magenta: #ff2fb0;
      --yellow: #ffb800;
      --red: #ef4444;
      --bg: #f8fafc;
      --card: #ffffff;
      --text-main: #0f172a;
      --text-muted: #475569;
      --border: #e2e8f0;
      --sidebar-bg: #f1f5f9;
    }
    body.dark {
      --bg: #0b1220;
      --card: #0f172a;
      --text-main: #e5e7eb;
      --text-muted: #cbd5e1;
      --border: #1f2937;
      --sidebar-bg: #101c31;
    }
    * {margin:0; padding:0; box-sizing:border-box;}

    body {
      background: var(--bg);
      color: var(--text-main);
      font-family: 'Inter', sans-serif;
      line-height: 1.7;
    }
    a { color: inherit; text-decoration: none; }

    header {
      backdrop-filter: blur(12px);
      background: color-mix(in srgb, var(--card) 92%, transparent);
      border-bottom: 1px solid var(--border);
      padding: 0.7rem 0.7rem;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1100;
    }
    .header-inner {
      width:100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:1rem;
    }
    .logo {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.7rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      background: linear-gradient(120deg, var(--cyan), var(--magenta), var(--yellow));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display:flex;
      align-items:center;
      gap:0.4rem;
    }
    .logo-dot {
      width:10px; height:10px; border-radius:50%;
      background: var(--magenta);
      animation: pulseDot 1.6s infinite alternate;
    }
    @keyframes pulseDot { from { transform:scale(1); opacity:0.7; } to { transform:scale(1.35); opacity:1; } }
    .toggle-theme {
      background: var(--card);
      color: var(--text-main);
      border:1px solid var(--border);
      padding:0.4rem 0.7rem;
      border-radius:10px;
      display:inline-flex;
      align-items:center;
      gap:0.35rem;
      cursor:pointer;
      transition:transform 0.15s ease, filter 0.15s ease;
    }
    .toggle-theme:hover { transform:translateY(-1px); filter:brightness(1.03); }
    main { padding-top:80px; }

    .docs-layout {
      display:flex;
      min-height:calc(100vh - 88px);
      padding:0 0.8rem 3rem;
      gap:1.2rem;
      max-width: 1500px;
      margin:0 auto;
    }
    .sidebar {
      width:350px;
      min-width:220px;
      background:var(--sidebar-bg);
      border-radius:16px;
      border:1px solid var(--border);
      padding:2.1rem 1.2rem 2.2rem;
      display:flex;
      flex-direction:column;
      max-height:calc(100vh - 110px);
      position:sticky; top:95px;
      overflow-y:auto;
      gap:0.095rem;
      flex-shrink: 0;
      box-sizing: border-box;
      box-shadow: 0 2px 18px 0 rgba(11,191,201,0.05);
    }
    .sidebar-title {
      font-size:1.13rem;
      font-family:'Orbitron',sans-serif;
      letter-spacing:0.13em;
      text-transform:uppercase;
      color:var(--magenta);
      margin-bottom:1.24rem;
      font-weight:700;
      display:flex;align-items:center;gap:0.51rem;
    }
    .sidebar-list {
      list-style:none; padding:0; margin:0;
      display:flex; flex-direction:column; gap:0.1rem;
    }
    .sidebar-list li {
      border-radius:8px;
      font-size:1.07rem;
      font-weight:600;
      color:var(--text-main);
      transition:background 0.13s,color 0.13s, border 0.12s;
      padding:0.49rem 0.83rem;
      cursor:pointer;
      margin-bottom:1px;
      display:flex; align-items:center; gap:0.43rem;
      border:1.5px solid transparent;
    }
    .sidebar-list li.active, .sidebar-list li:hover {
      background:linear-gradient(90deg,rgba(11,191,201,0.05),rgba(255,47,176,0.10));
      color:var(--cyan);
      border:1.5px solid var(--magenta);
    }
    .sidebar-list li .material-icons-round {
      font-size:1.11rem; opacity:0.73;
    }
    .doc-content-panel {
      flex: 1 1 0;
      min-width:0; 
      background: var(--card);
      border-radius:16px;
      border:1px solid var(--border);
      padding: 2.8rem 3.3rem 1.5rem;
      box-shadow:0 4px 24px 0 rgba(11,191,201,0.04);
      display:flex; flex-direction:column; align-items:center;
      width:100%;
      max-width: 1000px;
    }
    .doc-image {
      width:140px;
      max-width:60vw;
      height:auto;
      border-radius:7.5px;
      margin-bottom:1.3rem;
      object-fit:cover;
      background:#e2e8f0;
      border:1px solid #dbdbdb;
      display:block;
      box-shadow:0 1px 18px 0 rgba(40,40,70,0.07);
    }
    .doc-title {
      font-family:'Orbitron',sans-serif;
      color:var(--cyan);
      font-size:1.55rem;
      margin-bottom:1.0rem;
      text-align:center;
      letter-spacing:0.12em;
      text-transform:uppercase;
      font-weight:700;
      word-break:break-word;
    }
    .doc-content {
      font-size:1.12rem;
      color:var(--text-main);
      width:100%;
      max-width:800px;
      background: none;
      margin: 0 auto;
      line-height:1.82;
      overflow-x: auto;
      letter-spacing: 0.01em;
    }
    .doc-content p {
      margin-bottom:1.04em;
      margin-top:0.7em;
      word-break:break-word;
    }
    .doc-content ul, .doc-content ol {
      margin-bottom: 1em;
      margin-left: 1.5em;
      padding-left: 0.3em;
    }
    .doc-content ul li, .doc-content ol li {
      margin-bottom: 0.48em;
      font-size: 1rem;
    }
    .doc-content h2, .doc-content h3, .doc-content h4 {
      margin: 1.4em 0 0.7em;
      font-family: 'Orbitron', sans-serif;
      color: var(--magenta);
      font-size: 1.05em;
      font-weight:700;
      letter-spacing: 0.03em;
    }
    .doc-content code {
      font-family:monospace;
      background: #e0f6fa;
      color: #02737b;
      padding: 0.11em 0.41em;
      border-radius: 5px;
      font-size: 0.97em;
    }
    .doc-content blockquote {
      margin: 1.2em 0;
      padding: 0.5em 1em;
      background: #f0f6fa;
      border-left: 3.7px solid var(--cyan);
      color: #098;
      font-style: italic;
      border-radius: 6px;
    }
    .docs-empty-msg {
      color:var(--text-muted);
      margin:2.2rem 0;
      text-align:center;
      padding:2rem 1rem;
      border:1.5px dashed var(--border);
      border-radius:16px;
      background:color-mix(in srgb, var(--card) 95%, var(--bg) 5%);
    }
    footer {
      text-align: center;
      width: 100%;
      margin: 0 auto;
      margin-top: 2rem;
      padding: 1.4rem 0.75rem 0.5rem;
      background: var(--card);
      border-top:1px solid var(--border);
      font-size: 10px;
      color: var(--text-muted);
      font-family: 'Inter',sans-serif;
      letter-spacing:0.03em;
    }
    footer p {
      font-size: 10px;
      margin: 0.28em 0 0 0;
      color: var(--text-muted);
      text-align: center;
      font-family: inherit;
    }
    footer a {
      color: var(--cyan);
      text-decoration: none;
      margin: 0 0.25em;
      font-size: inherit;
      letter-spacing: 0.03em;
    }
    footer a:hover {
      text-decoration: underline;
    }
    @media (max-width:1000px){
      .docs-layout { flex-direction:column; gap:1.00rem; }
      .sidebar { width:100%; margin-left:0; max-width:100%; }
    }
    @media (max-width:600px){
      .sidebar { padding:0.3rem 0.2rem;}
      .doc-content-panel { padding: 1.2rem 0.5rem; }
      footer { padding: 0.9rem 0.36rem 0.23rem;}
    }
  </style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="logo"><span class="logo-dot"></span> NFT FANS TOKEN</div>
    <button class="toggle-theme" id="themeToggle">
      <span class="material-icons-round" id="themeIcon">dark_mode</span>
      <span id="themeLabel">Dark</span>
    </button>
  </div>
</header>

<main>
  <div class="docs-layout">
    <nav class="sidebar">
      <div class="sidebar-title">
        <span class="material-icons-round">article</span>Documents
      </div>
      <ul class="sidebar-list" id="sidebarList">
        <li><span class="material-icons-round">hourglass_empty</span>Loading…</li>
      </ul>
    </nav>
    <section class="doc-content-panel" id="docContentPanel">
      <div class="docs-empty-msg" id="docsEmpty">
        No official NFT Fans Token documents yet.<br/>Check back soon.
      </div>
    </section>
  </div>
</main>

<footer>
    <p>
      <a href="https://x.com/nftfanstoken" target="_blank">Twitter/X</a> &bull;
      <a href="https://t.me/nftfanstokens" target="_blank">Telegram</a> &bull;
      <a href="https://www.nftfanstoken.com" target="_blank">nftfanstoken.com</a>
    </p>
    <p>© 2025 NFT Fans Token – Documents Portal</p>
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import {
    getDatabase,
    ref,
    onValue,
    query,
    orderByChild
  } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBuBB-Cha7eLG1O7SxOTfFt8e6hVAWjkxI",
    authDomain: "tokentransfer-4a9b3.firebaseapp.com",
    databaseURL: "https://tokentransfer-4a9b3-default-rtdb.firebaseio.com",
    projectId: "tokentransfer-4a9b3",
    storageBucket: "tokentransfer-4a9b3.firebasestorage.app",
    messagingSenderId: "205455490321",
    appId: "1:205455490321:web:9919f5dde059316c9320b0",
    measurementId: "G-Y6CVEDL9XH"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const postsRef = ref(db, "posts");

  const sidebarList = document.getElementById("sidebarList");
  const docContentPanel = document.getElementById("docContentPanel");
  const docsEmpty = document.getElementById("docsEmpty");

  function parseAndFormatDescription(desc) {
    return desc
      .replace(/\r\n/g, '\n')
      .split(/\n{2,}/)
      .map(par => {
        if (/^\s*[-*]\s+/.test(par)) {
          return '<ul>' +
            par.split(/\n/).map(line => line.replace(/^\s*[-*]\s+/, '')).map(item => `<li>${item}</li>`).join('') +
            '</ul>';
        } else {
          let formatted = par
            .replace(/^#+\s*(.*)/, '<h3>$1</h3>')
            .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
            .replace(/`([^`]+)`/g, '<code>$1</code>')
            .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
          return `<p>${formatted}</p>`;
        }
      }).join('');
  }

  function parseNumberString(str) {
    return str.split('.').map(part => parseInt(part, 10));
  }
  function compareNumberString(a, b) {
    const aParts = parseNumberString(a.number);
    const bParts = parseNumberString(b.number);
    const minLen = Math.min(aParts.length, bParts.length);
    for (let i = 0; i < minLen; i++) {
      if (aParts[i] !== bParts[i]) return aParts[i] - bParts[i];
    }
    return aParts.length - bParts.length;
  }

  function renderDocs(snapshot) {
    sidebarList.innerHTML = "";
    const data = snapshot.val();

    // Only docs with label === "DOC" (case-insensitive, trimmed) and number fields
    let docsArr = [];
    if (data) {
      docsArr = Object.entries(data)
        .map(([id, value]) => ({ id, ...value }))
        .filter(doc =>
          typeof doc.label === "string" &&
          doc.label.trim().toUpperCase() === "DOC" &&
          typeof doc.number === "string" && doc.number.trim() !== "" &&
          typeof doc.title === "string" && doc.title.trim() !== "" &&
          typeof doc.imageUrl === "string" && doc.imageUrl.trim() !== "" &&
          typeof doc.description === "string" && doc.description.trim() !== ""
        )
        .sort(compareNumberString); // 1.1, 1.2, 2, 2.1 etc ascending
    }

    if (docsArr.length === 0) {
      docsEmpty.style.display = "block";
      return;
    } else {
      docsEmpty.style.display = "none";
    }

    // Sidebar (top to bottom: 1.1 first, then 1.2, 2, ...)
    docsArr.forEach((doc, idx) => {
      const li = document.createElement('li');
      li.className = idx === 0 ? 'active' : '';
      li.dataset.docId = doc.id;
      let numStr = doc.number ? `<span style="color:var(--cyan);font-weight:700;margin-right:7px;">${doc.number}</span>` : "";
      li.innerHTML = `<span class="material-icons-round">description</span> ${numStr}${doc.title}`;
      sidebarList.appendChild(li);
    });

    // Show the first doc (top of list, i.e. 1.1 minimum)
    showDoc(docsArr[0]);

    Array.from(sidebarList.children).forEach((li, i) => {
      li.addEventListener('click', () => {
        Array.from(sidebarList.children).forEach(l => l.classList.remove('active'));
        li.classList.add('active');
        showDoc(docsArr[i]);
      });
    });
  }

  function showDoc(doc) {
    let htmlContent = parseAndFormatDescription(doc.description);
    docContentPanel.innerHTML = `
      <img src="${doc.imageUrl}" class="doc-image" alt="${doc.title}">
      <h1 class="doc-title">${doc.number ? doc.number + '. ' : ''}${doc.title}</h1>
      <div class="doc-content">${htmlContent}</div>
    `;
  }

  const postsQuery = query(postsRef, orderByChild("number"));
  onValue(postsQuery, renderDocs);
</script>

<script>
  // Theme toggle
  (() => {
    const toggle = document.getElementById('themeToggle');
    const icon = document.getElementById('themeIcon');
    const label = document.getElementById('themeLabel');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const stored = localStorage.getItem('nftfans-theme');

    function setTheme(mode) {
      if (mode === 'dark') document.body.classList.add('dark');
      else document.body.classList.remove('dark');
      icon.textContent = mode === 'dark' ? 'light_mode' : 'dark_mode';
      label.textContent = mode === 'dark' ? 'Light' : 'Dark';
      localStorage.setItem('nftfans-theme', mode);
    }
    setTheme(stored || (prefersDark ? 'dark' : 'light'));

    toggle.addEventListener('click', () => {
      const isDark = document.body.classList.contains('dark');
      setTheme(isDark ? 'light' : 'dark');
    });
  })();
</script>
</body>
</html>
