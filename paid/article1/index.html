<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>X Launches Smart Cashtags: Turning Financial Shitposting Into Live Market Data</title>

<!-- External Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
/* Reset & Base Styles */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Inter',system-ui,sans-serif; background:#000; color:#eaeaea; line-height:1.7; padding:20px; }
.container { max-width:900px; margin:0 auto; position: relative; }

/* Status Badge (Locked/Unlocked) */
.status-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}
.status-badge.locked { background: #d32f2f; color: #fff; border: 1px solid #ff5252; }
.status-badge.unlocked { background: #2e7d32; color: #fff; border: 1px solid #4caf50; }

/* Header */
.article-header { margin-bottom:32px; border-bottom:1px solid #222; padding-bottom:20px; }
.article-title { font-size:2.2rem; font-weight:700; color:#fff; margin-bottom:10px; }
.article-meta { font-size:0.9rem; color:#888; }

/* Takeaways (Always Visible) */
.key-takeaways { background:#000; border:1px solid #555; padding:16px 20px; border-radius:6px; margin:30px 0; }
.key-takeaways h2 { font-size:1.5rem; color:#fff; margin-bottom:12px; }
.key-takeaways ul { list-style:none; }
.key-takeaways li { margin-bottom:8px; font-size:1.05rem; color:#ddd; }
.key-takeaways li::before { font-family:'Material Icons'; content:'insights'; margin-right:8px; color:#aaa; vertical-align:middle; }

/* Image */
.article-image { width:100%; max-width:820px; margin:30px auto; display:block; border-radius:6px; }

/* Paywall UI */
#paywall-ui {
    border: 1px solid #333;
    background: #111;
    border-radius: 8px;
    padding: 40px 20px;
    text-align: center;
    margin: 40px 0;
}
.paywall-title { font-size: 1.4rem; color: #fff; margin-bottom: 10px; font-weight: 600; }
.paywall-desc { color: #888; margin-bottom: 24px; }

.btn-primary {
    background: #8247e5; /* Polygon Purple */
    color: white;
    border: none;
    padding: 14px 28px;
    font-size: 1.1rem;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s, transform 0.1s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}
.btn-primary:hover { background: #6f3cc4; transform: translateY(-2px); }
.btn-primary:disabled { background: #444; cursor: not-allowed; opacity: 0.7; transform: none; }

/* Status Messages in Paywall */
#status-msg { margin-top: 15px; font-size: 0.95rem; min-height: 24px; font-weight: 500; }
.text-error { color: #ff5252; }
.text-success { color: #69f0ae; }
.loader { display:inline-block; width:14px; height:14px; border:2px solid #fff; border-radius:50%; border-top-color:transparent; animation:spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Main Content (Hidden initially) */
#locked-content { display: none; } 
.article-content p { margin-bottom:22px; font-size:1.1rem; color:#ddd; }
.article-content h2 { font-size:1.6rem; margin:40px 0 16px; font-weight:600; color:#fff; }
.highlight { color:#fff; font-weight:600; }

.share-box { margin:40px 0; display:flex; gap:12px; flex-wrap:wrap; }
.share-btn { background:#111; border:1px solid #333; color:#eaeaea; padding:10px 16px; font-size:0.9rem; cursor:pointer; border-radius:4px; }
.share-btn:hover { background:#1a1a1a; border-color:#555; }
.airdrop-note { margin:40px 0; padding:16px; background:#000; border:1px solid #555; border-radius:6px; color:#ddd; font-size:1.05rem; text-align:center; }
.footer { border-top:1px solid #222; margin-top:50px; padding-top:20px; text-align:center; color:#777; font-size:0.9rem; }

/* Responsive */
@media (max-width: 600px) {
  .article-title { font-size: 1.8rem; }
  .paywall-ui { padding: 30px 15px; }
}
</style>
</head>

<body>
<div class="container">

    <!-- Status Badge -->
    <div id="lock-status" class="status-badge locked">
        <span class="material-icons" style="font-size:12px; vertical-align:middle; margin-right:4px;">lock</span>
        Article Locked
    </div>

    <header class="article-header">
        <h1 class="article-title">X Launches Smart Cashtags</h1>
        <div class="article-meta">Turning Financial Shitposting Into Live Market Data</div>
    </header>

    <div class="key-takeaways">
        <h2>Key Takeaways</h2>
        <ul>
            <li>X is launching Smart Cashtags with real-time price data</li>
            <li>Posts can tag assets and smart contracts directly</li>
            <li>Market chatter becomes searchable, trackable intelligence</li>
            <li>Meme coins and short squeezes gain live context</li>
            <li>X moves closer to becoming financial infrastructure</li>
        </ul>
    </div>

    <img src="https://i.postimg.cc/4ys16NyD/image.png" alt="X Smart Cashtags live market data" class="article-image">

    <!-- Paywall / Connect UI -->
    <div id="paywall-ui">
        <h3 class="paywall-title">Continue Reading</h3>
        <p class="paywall-desc">Unlock the full analysis for 1 POL. Once paid, you have permanent access.</p>
        
        <button id="connect-btn" class="btn-primary" onclick="connectWallet()">
            Connect Wallet
        </button>
        
        <button id="pay-btn" class="btn-primary" style="display:none;" onclick="payToUnlock()">
            Pay 1 POL to Unlock
        </button>

        <div id="status-msg"></div>
    </div>

    <!-- Hidden Content -->
    <main id="locked-content" class="article-content">
        <p>
        X is preparing to launch <span class="highlight">Smart Cashtags</span>, a feature that could fundamentally change how financial information moves across the internet. Users will be able to tag assets, tokens, and even smart contracts directly in posts — with live market prices and discussions just one tap away.
        </p>

        <h2>From Chaos to Structured Market Data</h2>
        <p>
        For years, X has been the epicenter of market-moving information. Meme coins rallies, short squeeze coordination, and viral “buy the dip” threads have influenced hundreds of billions of dollars in market activity. Smart Cashtags formalize this chaos by linking posts directly to real-time data feeds.
        </p>

        <h2>How Smart Cashtags Work</h2>
        <p>
        When users tag an asset or smart contract, readers can tap the cashtag to instantly view live prices, historical performance, and all related discussions. What was once scattered speculation becomes organized, searchable market intelligence.
        </p>

        <h2>Why This Matters for Crypto and Markets</h2>
        <p>
        Crypto thrives on speed and sentiment. By connecting social discussion directly to live data, X is blurring the line between social media and financial terminals. Meme coins, DeFi tokens, and emerging assets gain visibility and context in real time.
        </p>

        <h2>X as Financial Infrastructure</h2>
        <p>
        This move signals a broader ambition. X is no longer just where markets react — it is becoming part of the infrastructure itself. With Smart Cashtags, financial conversations transform into actionable data, accessible to anyone in seconds.
        </p>

        <div class="share-box">
        <button class="share-btn" onclick="shareOnX()">Share on X</button>
        <button class="share-btn" onclick="copyLink()">Copy link</button>
        </div>

        <div class="airdrop-note">
        You can claim an airdrop of <span class="highlight">10 Billion $NFTFAN TOKENS</span> by sharing this article on X.
        </div>
    </main>

    <footer class="footer">
        © 2026 NFT FANS TOKEN
    </footer>

</div>

<script>
// --- Configuration ---
const RECEIVER_ADDRESS = "0x92d550cdbc234211957bd1b579d962c885a127ba";
const PAYMENT_AMOUNT_POL = "1.0";
const POLYGON_CHAIN_ID_HEX = "0x89"; // Chain ID 137 (Mainnet)

// --- Firebase Config ---
const firebaseConfig = {
    apiKey: "AIzaSyBuBB-Cha7eLG1O7SxOTfFt8e6hVAWjkxI",
    authDomain: "tokentransfer-4a9b3.firebaseapp.com",
    databaseURL: "https://tokentransfer-4a9b3-default-rtdb.firebaseio.com",
    projectId: "tokentransfer-4a9b3",
    storageBucket: "tokentransfer-4a9b3.firebasestorage.app",
    messagingSenderId: "205455490321",
    appId: "1:205455490321:web:9919f5dde059316c9320b0",
    measurementId: "G-Y6CVEDL9XH"
};

// Initialize Firebase
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const db = firebase.database();

// --- UI Elements ---
const connectBtn = document.getElementById("connect-btn");
const payBtn = document.getElementById("pay-btn");
const statusMsg = document.getElementById("status-msg");
const paywallUi = document.getElementById("paywall-ui");
const lockedContent = document.getElementById("locked-content");
const lockBadge = document.getElementById("lock-status");

let provider, signer, userAddress;

// --- Helper: Status Message ---
function setStatus(msg, type = "") {
    statusMsg.innerHTML = msg;
    statusMsg.className = type === "error" ? "text-error" : type === "success" ? "text-success" : "";
}

// --- Step 1: Connect Wallet ---
async function connectWallet() {
    if (!window.ethereum) {
        setStatus("MetaMask is not installed. Please install it to continue.", "error");
        return;
    }

    try {
        connectBtn.disabled = true;
        connectBtn.innerHTML = "<span class='loader'></span> Connecting...";
        setStatus("", ""); // Clear previous messages

        provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        userAddress = await signer.getAddress();

        setStatus("Wallet Connected", "success");
        await checkNetworkAndSwitch();
        await checkPaymentStatus(userAddress);

    } catch (error) {
        console.error(error);
        connectBtn.disabled = false;
        connectBtn.innerText = "Connect Wallet";
        setStatus("Connection failed. Please try again.", "error");
    }
}

// --- Step 2: Switch Network (Polygon) ---
async function checkNetworkAndSwitch() {
    const network = await provider.getNetwork();
    if (network.chainId !== 137) { // 137 is Polygon Mainnet
        setStatus("Switching to Polygon Network...", "normal");
        try {
            await window.ethereum.request({
                method: 'wallet_switchEthereumChain',
                params: [{ chainId: POLYGON_CHAIN_ID_HEX }],
            });
            // Re-initialize provider after switch to ensure correct chain context
            provider = new ethers.providers.Web3Provider(window.ethereum);
            signer = provider.getSigner();
        } catch (switchError) {
            // This error code indicates that the chain has not been added to MetaMask.
            if (switchError.code === 4902) {
                try {
                    await window.ethereum.request({
                        method: 'wallet_addEthereumChain',
                        params: [{
                            chainId: POLYGON_CHAIN_ID_HEX,
                            chainName: 'Polygon Mainnet',
                            nativeCurrency: { name: 'POL', symbol: 'POL', decimals: 18 },
                            rpcUrls: ['https://polygon-rpc.com/'],
                            blockExplorerUrls: ['https://polygonscan.com/']
                        }],
                    });
                    provider = new ethers.providers.Web3Provider(window.ethereum);
                    signer = provider.getSigner();
                } catch (addError) {
                    setStatus("Could not switch to Polygon network.", "error");
                    throw addError;
                }
            } else {
                setStatus("Please switch to Polygon network manually.", "error");
                throw switchError;
            }
        }
    }
}

// --- Step 3: Check Firebase for Previous Payment ---
async function checkPaymentStatus(address) {
    const safeAddress = address.toLowerCase();
    const userRef = db.ref('paid_users/' + safeAddress);
    
    setStatus("Checking access...", "normal");

    userRef.once('value').then((snapshot) => {
        if (snapshot.exists() && snapshot.val().paid === true) {
            unlockContent();
        } else {
            // User hasn't paid yet
            connectBtn.style.display = "none";
            payBtn.style.display = "inline-flex";
            setStatus("Please pay 1 POL to read.", "normal");
        }
    }).catch((error) => {
        console.error("DB Error", error);
        setStatus("Database check failed. Please refresh.", "error");
    });
}

// --- Step 4: Pay to Unlock ---
async function payToUnlock() {
    if (!signer) return;

    try {
        setStatus("<span class='loader'></span> Processing transaction...", "normal");
        payBtn.disabled = true;

        const tx = await signer.sendTransaction({
            to: RECEIVER_ADDRESS,
            value: ethers.utils.parseEther(PAYMENT_AMOUNT_POL)
        });

        setStatus("Transaction sent. Waiting for confirmation...", "normal");
        
        // Wait for 1 block confirmation
        await tx.wait(); 

        // --- Step 5: Save to Firebase ---
        const safeAddress = userAddress.toLowerCase();
        await db.ref('paid_users/' + safeAddress).set({
            paid: true,
            timestamp: Date.now(),
            txHash: tx.hash
        });

        unlockContent();

    } catch (error) {
        console.error(error);
        payBtn.disabled = false;
        payBtn.innerText = "Retry Payment"; // Change button text
        
        // Specific error handling
        if (error.code === 4001 || error.code === 'ACTION_REJECTED') {
             setStatus("Transaction rejected. Please try again.", "error");
        } else if (error.code === 'INSUFFICIENT_FUNDS') {
             setStatus("Insufficient POL balance. Please top up and try again.", "error");
        } else {
             setStatus("Payment failed. Please try again.", "error");
        }
    }
}

// --- Unlock Content UI ---
function unlockContent() {
    paywallUi.style.display = "none";
    lockedContent.style.display = "block";
    
    // Update Badge
    lockBadge.innerHTML = '<span class="material-icons" style="font-size:12px; vertical-align:middle; margin-right:4px;">lock_open</span> Article Unlocked';
    lockBadge.classList.remove('locked');
    lockBadge.classList.add('unlocked');

    // Smooth scroll to content
    lockedContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// --- Existing Sharing Logic ---
function shareOnX() {
  const url = encodeURIComponent("https://nftfanstoken.com/2026/x-smart-cashtags-launch");
  const text = encodeURIComponent(
    "X Launches Smart Cashtags: Turning Financial Shitposting Into Live Market Data\n\n" +
    "I am sharing this article to claim 10B $NFTFAN Tokens #NFTFANS"
  );
  window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, "_blank");
}
function copyLink() {
  navigator.clipboard.writeText("https://nftfanstoken.com/2026/x-smart-cashtags-launch");
  alert("Link copied to clipboard");
}
</script>

</body>
</html>
