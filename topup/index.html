<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CHECK YOUR NFTFANS BALANCE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <link rel="icon" href="https://i.imgur.com/ODP45iQ.png" type="image/png">
  <style>
    :root {
      --background: #181B22;
      --card-bg: #222630;
      --input-bg: #232733;
      --accent: #86A8E7;
      --accent2: #91EAE4;
      --accent3: #4F5B77;
      --text: #F3F6FB;
      --muted: #A2A9B7;
      --error: #FF6565;
      --radius: 16px;
      --shadow: 0 2px 12px 0 rgba(20,24,36,0.15);
    }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--background);
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      color: var(--text);
      min-height: 100vh;
      width: 100vw;
      box-sizing: border-box;
      font-size: 13px;
    }

    body {
      display: block;
      min-height: 100vh;
    }

    .container {
      background: var(--card-bg);
      border-radius: 1px;
      box-shadow: var(--shadow);
      padding: 1em 0.9em 1.2em 0.9em;
      max-width: 370px;
      width: 100vw;
      box-sizing: border-box;
      text-align: center;
      margin: 0.7em auto 0 auto;
      position: relative;
      display: block;
    }

    .logo {
      width: 28px;
      height: 28px;
      display: block;
      margin: 0 auto 7px auto;
      border-radius: 50%;
      background: transparent;
      box-shadow: 0 2px 8px 0 rgba(134,168,231,0.11);
    }

    h1 {
      font-size: 0.95em;
      font-weight: 700;
      margin: 0 0 1.1em 0;
      letter-spacing: 0.02em;
      background: linear-gradient(90deg, var(--accent) 0%, var(--accent2) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .input-row {
      display: flex;
      gap: 0.4em;
      align-items: center;
      margin-bottom: 1.3em;
    }

    input[type="text"] {
      background: var(--input-bg);
      border: none;
      border-radius: 8px;
      padding: 0.42em 0.6em;
      color: var(--text);
      font-size: 0.8em;
      outline: none;
      flex: 1;
      min-width: 0;
      transition: background 0.2s;
    }

    input[type="text"]:focus {
      background: #262b3a;
    }

    button {
      background: linear-gradient(90deg, var(--accent) 0%, var(--accent2) 100%);
      color: #181B22;
      border: none;
      border-radius: 8px;
      padding: 0.45em 0.65em;
      font-weight: 700;
      font-size: 0.8em;
      letter-spacing: 0.03em;
      cursor: pointer;
      transition: filter 0.18s, background 0.18s;
      box-shadow: 0 2px 4px 0 rgba(134,168,231,0.10);
    }

    button:active {
      filter: brightness(0.95);
    }

    .button-row {
      display: flex;
      gap: 0.5em;
      justify-content: center;
      margin-bottom: 1.3em;
    }

    #result {
      margin-top: 1em;
      font-size: 0.83em;
      color: var(--accent2);
      min-height: 1.3em;
      word-break: break-all;
    }

    .error {
      color: var(--error) !important;
    }

    .muted {
      color: var(--muted);
      font-size: 0.8em;
      margin-top: 0.7em;
      letter-spacing: 0.01em;
    }

    /* How-to-get-tokens section (8-9px font) */
    .how-to-get-tokens-section {
      background: #222733;
      border-radius: 11px;
      margin: 1.1em 0 0 0;
      padding: 0.9em 0.7em 0.95em 0.7em;
      font-size: 8.5px;
      color: #DAF6FB;
      text-align: left;
      box-shadow: 0 2px 10px 0 rgba(145,234,228,0.07);
      line-height: 1.7;
      word-break: break-word;
    }
    .how-to-get-tokens-section b {
      color: #86A8E7;
      font-weight: 700;
    }
    .how-to-get-tokens-section .airdrop-address-row {
      display: flex;
      align-items: center;
      gap: 0.35em;
      margin: 0.16em 0 0.3em 0;
      word-break: break-all;
      background: #212a37;
      border-radius: 6px;
      padding: 0.3em 0.48em 0.3em 0.4em;
      font-size: 8.5px;
      font-weight: 600;
      color: #91EAE4;
      box-shadow: 0 2px 8px 0 rgba(145,234,228,0.05);
    }
    .how-to-get-tokens-section .copy-btn {
      background: none;
      border: none;
      color: #91EAE4;
      font-size: 8.5px;
      cursor: pointer;
      padding: 0.1em 0.5em;
      border-radius: 6px;
      transition: background 0.14s;
      box-shadow: none;
      font-weight: 700;
      margin-left: 0.1em;
      display: flex;
      align-items: center;
      gap: 0.2em;
      position: relative;
    }
    .how-to-get-tokens-section .copy-btn:active {
      background: #232733;
      color: #86A8E7;
    }
    .how-to-get-tokens-section .copied-tooltip {
      display: none;
      position: absolute;
      left: 50%;
      bottom: 120%;
      transform: translateX(-50%);
      background: #181B22;
      color: #91EAE4;
      padding: 0.11em 0.4em;
      border-radius: 7px;
      font-size: 8px;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0.95;
      z-index: 1;
    }
    .how-to-get-tokens-section .copy-btn.copied .copied-tooltip {
      display: block;
      animation: fadeOut 1.1s forwards;
    }

    .tokens-left-row {
      display: flex;
      align-items: center;
      gap: 0.47em;
      margin: 0.7em 0 0.2em 0;
      color: #91EAE4;
      font-size: 9px;
      font-weight: 700;
      background: #212a37;
      border-radius: 6px;
      padding: 0.38em 0.65em;
      justify-content: flex-start;
      word-break: break-all;
    }
    .tokens-left-row span {
      color: #DAF6FB;
      font-weight: bold;
      font-size: 9px;
    }
    .tokens-left-row .refresh-btn {
      background: none;
      border: none;
      color: #A2A9B7;
      font-size: 9px;
      cursor: pointer;
      margin-left: 0.6em;
      padding: 0.1em 0.36em;
      border-radius: 5px;
      transition: background 0.12s;
    }
    .tokens-left-row .refresh-btn:active {
      background: #181B22;
      color: #91EAE4;
    }

    @keyframes fadeOut {
      0% { opacity: 0.95; }
      80% { opacity: 0.95; }
      100% { opacity: 0; }
    }

    @media (max-width: 480px) {
      html, body {
        font-size: 9px;
      }
      .container {
        padding: 0.6em 0.2em 0.9em 0.2em;
        max-width: 100vw;
      }
      .logo {
        width: 19px;
        height: 19px;
        margin-bottom: 6px;
      }
      h1 {
        font-size: 0.72em;
        margin-bottom: 0.7em;
      }
      input[type="text"], button {
        font-size: 9px;
        padding: 0.35em 0.37em;
        border-radius: 7px;
      }
      #result {
        font-size: 8px;
        min-height: 1.0em;
      }
      .muted {
        font-size: 7.1px;
      }
      .how-to-get-tokens-section {
        font-size: 8px;
        padding: 0.5em 0.09em 0.8em 0.09em;
      }
      .how-to-get-tokens-section .airdrop-address-row {
        font-size: 8px;
        padding: 0.14em 0.18em 0.14em 0.16em;
      }
      .how-to-get-tokens-section .copied-tooltip,
      .tokens-left-row .refresh-btn {
        font-size: 7.3px;
        padding: 0.09em 0.28em;
      }
      .tokens-left-row {
        font-size: 8px;
        padding: 0.20em 0.25em;
      }
      .tokens-left-row span {
        font-size: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <img class="logo" src="https://i.imgur.com/ODP45iQ.png" alt="NFTFAN Logo" />
    <h1>CHECK YOUR NFTFANS BALANCE</h1>

    <form class="input-row" onsubmit="getBalance();return false;">
      <input type="text" id="wallet" placeholder="Paste your wallet address (0x...)" maxlength="42" autocomplete="off"/>
    </form>
    <div class="button-row">
      <button type="button" onclick="getBalance()">CHECK</button>
    </div>
    <div id="result"></div>
    <div class="muted">NFTFAN Token · Polygon (MATIC) · <span style="white-space:nowrap;">Powered by Polygonscan</span></div>

    <div class="tokens-left-row" id="tokensLeftRow">
      Amount left in token sale contract:
      <span id="tokensLeftValue">—</span>
      <button class="refresh-btn" type="button" title="Refresh" onclick="fetchTokensLeft()">
        &#x21bb;
      </button>
    </div>

    <div class="how-to-get-tokens-section" style="margin-top:1.3em;">
      <b>How to get $NFTFAN tokens:</b>
      <br>
      <ol style="margin:0.5em 0 0.7em 1.1em;padding:0 0 0 1.2em;list-style:decimal;color:#DAF6FB;">
        <li style="margin-bottom:0.38em;">
          Send <b>0.01 - 100 $POL</b> (Polygon) to the airdrop contract:
          <div class="airdrop-address-row">
            <span id="airdropAddr2">0xaf2d132C8773bca3821C24EcF64e844E202A12e8</span>
            <button class="copy-btn" type="button" onclick="copyAirdropAddress2(this)">
              <svg xmlns="http://www.w3.org/2000/svg" style="height:1em;width:1em;vertical-align:middle;margin-right:1px;" fill="none" viewBox="0 0 20 20"><path fill="#91EAE4" d="M6 2.75A2.25 2.25 0 0 0 3.75 5v10A2.25 2.25 0 0 0 6 17.25h8A2.25 2.25 0 0 0 16.25 15v-4.25a.75.75 0 0 0-1.5 0V15A.75.75 0 0 1 14 15.75H6A.75.75 0 0 1 5.25 15V5A.75.75 0 0 1 6 4.25h4.25a.75.75 0 0 0 0-1.5H6ZM15.78 2.72a.75.75 0 0 0-1.06 0l-5.25 5.25a.75.75 0 0 0 1.06 1.06l5.25-5.25a.75.75 0 0 0 0-1.06Z"/></svg>
              <span>Copy</span>
              <span class="copied-tooltip">Copied!</span>
            </button>
          </div>
        </li>
        <li style="margin-bottom:0.38em;">
          You will receive $NFTFAN tokens airdropped to your wallet automatically.
        </li>
        <li>
          Check your balance above after a few seconds.
        </li>
		<li>
          You will get 1000 trillion $NFTFAN for 1 $POL.
        </li>
      </ol>
      <div style="color:#A2A9B7;font-size:8.4px;margin-top:0.3em;">
        <b>Note:</b> Only send $POL (Polygon) from your own wallet. Do not send funds from an exchange.
      </div>
    </div>
  </div>
  <script>
    const tokenAddress = "0x2017Fcaea540d2925430586DC92818035Bfc2F50";
    const apiKey = "3AFN3ZU4ANK3XEUJQ6BRJCBCITAFHKFVTV"; // Your Polygonscan API Key
    const airdropContract = "0xaf2d132C8773bca3821C24EcF64e844E202A12e8";

    function validateEthAddress(addr) {
      return /^0x[a-fA-F0-9]{40}$/.test(addr);
    }

    async function getBalance() {
      const wallet = document.getElementById("wallet").value.trim();
      const resultDiv = document.getElementById("result");
      if (!wallet) {
        resultDiv.innerHTML = "<span class='error'>Please enter a wallet address.</span>";
        return;
      }
      if (!validateEthAddress(wallet)) {
        resultDiv.innerHTML = "<span class='error'>Invalid Polygon (EVM) address.<br>It should start with 0x and be 42 characters.</span>";
        return;
      }
      resultDiv.innerHTML = "<span class='muted'>Checking...</span>";
      const url = `https://api.polygonscan.com/api?module=account&action=tokenbalance&contractaddress=${tokenAddress}&address=${wallet}&tag=latest&apikey=${apiKey}`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data.status === "1") {
          const decimals = 18;
          let balance = Number(data.result) / 10 ** decimals;
          let display = balance.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 6});
          resultDiv.innerHTML = `<b>NFTFAN Balance:</b> <span style="font-weight:700;color:#91EAE4">${display}</span>`;
        } else {
          resultDiv.innerHTML = "<span class='error'>Error fetching balance.<br>Check the address or try again later.</span>";
        }
      } catch (err) {
        resultDiv.innerHTML = "<span class='error'>Error fetching balance.<br>Please try again later.</span>";
      }
    }

    // Allow pressing Enter to submit on mobile
    document.getElementById("wallet").addEventListener('keydown', function(e) {
      if (e.key === "Enter") {
        getBalance();
        e.preventDefault();
        return false;
      }
    });

    // Copy airdrop address (main how-to-get-tokens section)
    function copyAirdropAddress2(btn) {
      const address = document.getElementById('airdropAddr2').innerText;
      if (navigator && navigator.clipboard) {
        navigator.clipboard.writeText(address).then(() => {
          btn.classList.add('copied');
          setTimeout(() => btn.classList.remove('copied'), 1150);
        });
      } else {
        // fallback for old browsers
        const textarea = document.createElement("textarea");
        textarea.value = address;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);
        btn.classList.add('copied');
        setTimeout(() => btn.classList.remove('copied'), 1150);
      }
    }

    // Show tokens left in airdrop CA
    async function fetchTokensLeft() {
      const tokensLeftValue = document.getElementById('tokensLeftValue');
      tokensLeftValue.textContent = '...';
      // Polygonscan API: get NFTFAN token balance for the airdrop contract
      const url = `https://api.polygonscan.com/api?module=account&action=tokenbalance&contractaddress=${tokenAddress}&address=${airdropContract}&tag=latest&apikey=${apiKey}`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data.status === "1") {
          const decimals = 18;
          let balance = Number(data.result) / 10 ** decimals;
          let display = balance.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 3});
          tokensLeftValue.textContent = display;
        } else {
          tokensLeftValue.textContent = 'Error';
        }
      } catch (err) {
        tokensLeftValue.textContent = 'Error';
      }
    }

    // Fetch tokens left at page load
    fetchTokensLeft();
  </script>
</body>
</html>
