<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CHECK YOUR NFTFANS BALANCE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <link rel="icon" href="https://i.imgur.com/ODP45iQ.png" type="image/png">
  <style>
    :root {
      --bg-1: #0f1220;
      --bg-2: #0b0e19;
      --glass: rgba(34, 38, 56, 0.35);
      --input: rgba(35, 39, 51, 0.7);
      --outline: rgba(255,255,255,0.08);
      --ring: rgba(134,168,231,0.4);

      --text: #EAF1FF;
      --muted: #A7B0C2;
      --muted-2: #8D97AA;

      --accent: #86A8E7;
      --accent2: #91EAE4;

      --good: #91EAE4;
      --error: #FF6B6B;

      --radius-xl: 18px;
      --radius: 14px;
      --shadow-xl: 0 30px 80px rgba(0,0,0,0.45), 0 6px 24px rgba(0,0,0,0.28);
      --shadow-soft: 0 8px 24px rgba(0,0,0,0.28);
      --blur: 16px;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      background: radial-gradient(1200px 900px at 15% 10%, #1a1f33 0%, transparent 45%),
                  radial-gradient(1000px 800px at 85% 15%, #1a2a3d 0%, transparent 50%),
                  linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      min-height: 100vh;
      width: 100%;
      font-size: 14px;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 10% 0%, rgba(145, 234, 228, 0.07) 0%, transparent 30%),
        radial-gradient(circle at 90% 20%, rgba(134, 168, 231, 0.06) 0%, transparent 30%),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.02) 0 1px, transparent 1px 40px);
      pointer-events: none;
      z-index: 0;
    }

    main {
      min-height: 100svh;
      display: grid;
      place-items: start center;
      padding: 24px 16px 40px;
      position: relative;
      z-index: 1;
    }

    /* CARD */
    .container {
      position: relative;
      width: 100%;
      max-width: 480px;
      border-radius: var(--radius-xl);
      padding: 22px 18px 18px;
      background: linear-gradient(180deg, rgba(28,33,51,0.55), rgba(22,25,39,0.55));
      backdrop-filter: blur(var(--blur));
      -webkit-backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow-xl);
      overflow: hidden;
      isolation: isolate;
    }

    .container::before {
      content: "";
      position: absolute;
      inset: 0;
      padding: 1px;
      border-radius: inherit;
      background: linear-gradient(120deg, rgba(134,168,231,0.7), rgba(145,234,228,0.65), rgba(134,168,231,0.4));
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      pointer-events: none;
      opacity: 0.8;
    }

    .glow {
      position: absolute;
      inset: -40% -20% auto auto;
      width: 70%;
      aspect-ratio: 1/1;
      background: radial-gradient(closest-side, rgba(134,168,231,0.14), transparent 70%);
      filter: blur(30px);
      z-index: -1;
    }
    .glow-2 {
      position: absolute;
      bottom: -35%;
      left: -20%;
      width: 70%;
      aspect-ratio: 1/1;
      background: radial-gradient(closest-side, rgba(145,234,228,0.12), transparent 70%);
      filter: blur(32px);
      z-index: -1;
    }

    /* HEADER */
    .header {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 12px;
      align-items: center;
      margin-bottom: 14px;
    }

    .logo-wrap {
      position: relative;
      width: 48px;
      height: 48px;
      display: grid;
      place-items: center;
      border-radius: 50%;
      background: radial-gradient(120% 120% at 20% 10%, rgba(145,234,228,0.25) 0%, rgba(134,168,231,0.12) 40%, transparent 75%);
      box-shadow: 0 8px 22px rgba(134,168,231,0.18);
    }

    .logo {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: block;
      box-shadow: 0 4px 14px rgba(134,168,231,0.18);
    }

    h1 {
      margin: 0;
      font-size: 1rem;
      letter-spacing: 0.02em;
      font-weight: 800;
      line-height: 1.2;
      background: linear-gradient(90deg, var(--accent) 0%, var(--accent2) 50%, #b7f7e6 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-transform: uppercase;
    }

    .subtitle {
      margin-top: 4px;
      color: var(--muted);
      font-size: 0.85rem;
      letter-spacing: 0.01em;
    }

    /* INPUT + BUTTONS */
    .card-section {
      background: var(--glass);
      border: 1px solid var(--outline);
      border-radius: var(--radius);
      padding: 12px;
      box-shadow: var(--shadow-soft);
    }

    .input-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
      margin: 0;
    }

    .input-group {
      display: grid;
      grid-template-columns: 32px 1fr;
      align-items: center;
      gap: 8px;
      background: var(--input);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 12px;
      padding: 8px 10px;
      transition: border-color 0.2s, box-shadow 0.2s, background 0.2s;
    }

    .input-group:focus-within {
      border-color: var(--ring);
      box-shadow: 0 0 0 4px rgba(134,168,231,0.12);
      background: rgba(37, 42, 60, 0.85);
    }

    .input-icon {
      display: grid;
      place-items: center;
      width: 28px;
      height: 28px;
      border-radius: 8px;
      background: linear-gradient(135deg, rgba(134,168,231,0.16), rgba(145,234,228,0.14));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
    }

    input[type="text"] {
      background: transparent;
      border: none;
      color: var(--text);
      font-size: 0.9rem;
      outline: none;
      min-width: 0;
    }

    .button-row {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }

    .btn {
      --btn-bg: linear-gradient(90deg, var(--accent) 0%, var(--accent2) 100%);
      appearance: none;
      border: 0;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 800;
      letter-spacing: 0.02em;
      color: #0f1422;
      background: var(--btn-bg);
      box-shadow: 0 10px 24px rgba(134,168,231,0.25), 0 4px 10px rgba(134,168,231,0.15);
      cursor: pointer;
      transition: transform 0.08s ease, filter 0.18s, box-shadow 0.18s;
      white-space: nowrap;
      font-size: 0.9rem;
    }
    .btn:active { transform: translateY(1px) scale(0.995); filter: brightness(0.98); }
    .btn.secondary {
      --btn-bg: linear-gradient(90deg, #2b3144 0%, #2a3346 100%);
      color: var(--text);
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      border: 1px solid rgba(255,255,255,0.06);
    }
    .btn.wide { width: 100%; justify-content: center; }

    /* RESULT */
    #result {
      margin-top: 12px;
      min-height: 1.4em;
      font-size: 0.95rem;
      color: var(--good);
      word-break: break-all;
      background: rgba(18, 24, 36, 0.45);
      border: 1px solid rgba(145,234,228,0.18);
      padding: 10px 12px;
      border-radius: 12px;
    }

    .muted {
      color: var(--muted-2);
      font-size: 0.83rem;
      margin-top: 10px;
      text-align: center;
    }

    .error { color: var(--error) !important; }

    /* TOKENS LEFT */
    .info-row {
      margin-top: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(28, 33, 51, 0.55);
      border: 1px solid rgba(134,168,231,0.15);
      border-radius: 12px;
      padding: 10px 12px;
    }
    .info-row .badge {
      display: inline-grid;
      place-items: center;
      width: 28px;
      height: 28px;
      border-radius: 8px;
      background: linear-gradient(135deg, rgba(134,168,231,0.18), rgba(145,234,228,0.18));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
    }
    .info-row .label {
      color: var(--muted);
      font-weight: 600;
      font-size: 0.86rem;
    }
    .info-row .value {
      color: var(--text);
      font-weight: 800;
      font-size: 0.95rem;
      letter-spacing: 0.01em;
    }
    .refresh-btn {
      margin-left: auto;
      background: transparent;
      border: 0;
      color: var(--muted);
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 10px;
      transition: color 0.18s, background 0.18s, transform 0.08s;
    }
    .refresh-btn:active { transform: translateY(1px); }
    .refresh-btn:hover {
      background: rgba(255,255,255,0.04);
      color: var(--good);
    }

    /* FOOTER - Buy button at bottom */
    .footer-actions { margin-top: 14px; }

    /* MODAL (top, not centered) */
    .modal-overlay {
      position: fixed;
      inset: 0;
      display: grid;
      align-content: start;   /* stick to top */
      justify-items: center;  /* center horizontally */
      padding: 16px;
      background: rgba(10, 12, 18, 0.6);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      opacity: 0;
      visibility: hidden;
      transition: opacity .2s ease, visibility .2s ease;
      z-index: 1000;
    }
    .modal-overlay.open {
      opacity: 1;
      visibility: visible;
    }
    .modal {
      width: 100%;
      max-width: 560px;
      background: linear-gradient(180deg, rgba(28,33,51,0.6), rgba(22,25,39,0.6));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      box-shadow: var(--shadow-xl);
      transform: translateY(8px) scale(0.985);
      opacity: 0;
      transition: transform .2s ease, opacity .2s ease;
      overflow: hidden;
      outline: none;
      margin-top: 24px; /* push down a bit from top */
    }
    .modal-overlay.open .modal {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 14px 14px 0 14px;
    }
    .modal-title {
      font-weight: 400; /* not bold */
      font-size: 1rem;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0;
    }
    .modal-body {
      padding: 12px 14px 14px 14px;
    }
    .close-btn {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.08);
      color: var(--muted);
      border-radius: 10px;
      padding: 6px 8px;
      cursor: pointer;
      transition: background .18s, color .18s;
    }
    .close-btn:hover {
      background: rgba(255,255,255,0.06);
      color: var(--good);
    }

    /* HOW-TO content reused in modal */
    .how-list {
      margin: 8px 0 8px 18px;
      padding: 0;
      color: #DAF6FB;
      font-size: 0.92rem;
      line-height: 1.7;
    }
    .airdrop-address-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 6px 0 2px 0;
      background: rgba(21, 27, 42, 0.7);
      border: 1px solid rgba(145,234,228,0.18);
      border-radius: 10px;
      padding: 8px 10px;
      color: #b7f7e6;
      font-weight: 400; /* not bold */
      word-break: break-all;
    }
    .copy-btn {
      margin-left: auto;
      background: rgba(145,234,228,0.1);
      color: #91EAE4;
      border: 1px solid rgba(145,234,228,0.25);
      font-weight: 400;               /* not bold */
      font-size: 8px;                 /* 8px font for copy */
      padding: 4px 8px;               /* compact for tiny font */
      border-radius: 8px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: background 0.18s, transform 0.08s, border-color 0.18s;
      position: relative;
      line-height: 1;
    }
    .copy-btn svg { width: 12px; height: 12px; }
    .copy-btn:hover {
      background: rgba(145,234,228,0.16);
      border-color: rgba(145,234,228,0.4);
    }
    .copy-btn:active { transform: translateY(1px); }

    .copied-tooltip {
      display: none;
      position: absolute;
      left: 50%;
      bottom: 120%;
      transform: translateX(-50%);
      background: #0f1220;
      border: 1px solid rgba(145,234,228,0.35);
      color: #91EAE4;
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 8px; /* match copy size */
      white-space: nowrap;
      opacity: 0.95;
      z-index: 10;
    }
    .copy-btn.copied .copied-tooltip {
      display: block;
      animation: fadeOut 1.1s forwards;
    }

    .note {
      color: var(--muted);
      font-size: 0.86rem;
      margin-top: 8px;
    }
    .em { color: var(--accent); font-weight: 400; } /* emphasis without bold */

    /* Animations */
    @keyframes fadeOut {
      0% { opacity: 0.95; }
      80% { opacity: 0.95; }
      100% { opacity: 0; }
    }

    /* Logo wave */
    @keyframes logo-wave {
      0%   { transform: translateX(0) translateY(0); }
      10%  { transform: translateX(22px) translateY(-6px); }
      20%  { transform: translateX(42px) translateY(-11px);}
      30%  { transform: translateX(60px) translateY(-13px);}
      40%  { transform: translateX(78px) translateY(-10px);}
      50%  { transform: translateX(92px) translateY(0);}
      60%  { transform: translateX(78px) translateY(10px);}
      70%  { transform: translateX(60px) translateY(12px);}
      80%  { transform: translateX(42px) translateY(10px);}
      90%  { transform: translateX(22px) translateY(6px);}
      100% { transform: translateX(0) translateY(0);}
    }
    .logo.wave { animation: logo-wave 3.2s infinite cubic-bezier(0.42,0,0.58,1); will-change: transform; }

    /* Responsive */
    @media (max-width: 520px) {
      html, body { font-size: 13px; }
      .container { padding: 18px 14px 16px; }
      .logo-wrap { width: 42px; height: 42px; }
      .logo { width: 28px; height: 28px; }
      h1 { font-size: 0.95rem; }
      .subtitle { font-size: 0.8rem; }
      .btn { padding: 9px 12px; font-size: 0.85rem; }
      .input-group { padding: 8px 9px; }
      .input-icon { width: 26px; height: 26px; }

      @keyframes logo-wave {
        0%   { transform: translateX(0) translateY(0); }
        10%  { transform: translateX(12vw) translateY(-2.5vw); }
        20%  { transform: translateX(24vw) translateY(-3.5vw);}
        30%  { transform: translateX(34vw) translateY(-4vw);}
        40%  { transform: translateX(44vw) translateY(-2.5vw);}
        50%  { transform: translateX(52vw) translateY(0);}
        60%  { transform: translateX(44vw) translateY(2.5vw);}
        70%  { transform: translateX(34vw) translateY(4vw);}
        80%  { transform: translateX(24vw) translateY(3.5vw);}
        90%  { transform: translateX(12vw) translateY(2.5vw);}
        100% { transform: translateX(0) translateY(0);}
      }
    }
  </style>
</head>
<body>
  <main>
    <div class="container">
      <div class="glow"></div>
      <div class="glow-2"></div>

      <div class="header">
        <div class="logo-wrap">
          <img class="logo wave" src="https://i.imgur.com/ODP45iQ.png" alt="NFTFAN Logo" />
        </div>
        <div>
          <h1>Check your NFTFANS balance</h1>
          <div class="subtitle">Polygon (POL) • Powered by Polygonscan</div>
        </div>
      </div>

      <div class="card-section" style="margin-bottom:10px;">
        <form class="input-row" onsubmit="getBalance();return false;">
          <div class="input-group">
            <div class="input-icon" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M12 2L4 7v10l8 5 8-5V7l-8-5Z" stroke="#91EAE4" stroke-width="1.4"/>
                <path d="M12 22V12" stroke="#86A8E7" stroke-width="1.4"/>
              </svg>
            </div>
            <input type="text" id="wallet" placeholder="Paste your wallet address (0x...)" maxlength="42" autocomplete="off" inputmode="text" />
          </div>
          <div class="button-row">
            <button class="btn" type="button" onclick="getBalance()">Check</button>
          </div>
        </form>
        <div id="result"></div>
      </div>

      <div class="info-row" id="tokensLeftRow" role="status" aria-live="polite">
        <div class="badge" aria-hidden="true">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
            <path d="M12 8v8m4-4H8" stroke="#BDEFE9" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="label">Amount left in token sale contract:</div>
        <div class="value" id="tokensLeftValue">—</div>
        <button class="refresh-btn" type="button" title="Refresh" onclick="fetchTokensLeft()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="vertical-align:middle;">
            <path d="M20 12a8 8 0 1 1-2.34-5.66M20 4v6h-6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <!-- Footer with Buy button -->
      <div class="footer-actions">
        <button id="openBuyBtn" class="btn wide" type="button" aria-haspopup="dialog" aria-controls="howModal">
          Buy
        </button>
      </div>
    </div>
  </main>

  <!-- Modal (top-aligned, not centered) -->
  <div id="howModalOverlay" class="modal-overlay" aria-hidden="true">
    <div id="howModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="howModalTitle" tabindex="-1">
      <div class="modal-header">
        <h2 id="howModalTitle" class="modal-title">How to get $NFTFAN tokens</h2>
        <button class="close-btn" type="button" id="closeHowModal" aria-label="Close">✕</button>
      </div>
      <div class="modal-body">
        <ol class="how-list">
          <li style="margin-bottom:0.4em;">
            Send <span class="em">0.01 - 100 $POL</span> (Polygon) to the airdrop contract:
            <div class="airdrop-address-row">
              <span id="airdropAddr2">0xaf2d132C8773bca3821C24EcF64e844E202A12e8</span>
              <button class="copy-btn" type="button" onclick="copyAirdropAddress2(this)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" aria-hidden="true">
                  <path fill="#91EAE4" d="M6 2.75A2.25 2.25 0 0 0 3.75 5v10A2.25 2.25 0 0 0 6 17.25h8A2.25 2.25 0 0 0 16.25 15v-4.25a.75.75 0 0 0-1.5 0V15A.75.75 0 0 1 14 15.75H6A.75.75 0 0 1 5.25 15V5A.75.75 0 0 1 6 4.25h4.25a.75.75 0 0 0 0-1.5H6ZM15.78 2.72a.75.75 0 0 0-1.06 0l-5.25 5.25a.75.75 0 0 0 1.06 1.06l5.25-5.25a.75.75 0 0 0 0-1.06Z"/>
                </svg>
                <span>Copy</span>
                <span class="copied-tooltip" role="status">Copied!</span>
              </button>
            </div>
          </li>
          <li style="margin-bottom:0.38em;">You will receive $NFTFAN tokens airdropped to your wallet automatically.</li>
          <li style="margin-bottom:0.38em;">Check your balance above after a few seconds.</li>
          <li>You will get <span class="em">1000 trillion $NFTFAN</span> for 1 $POL.</li>
        </ol>
        <div class="note">
          <span class="em">Note:</span> Only send $POL (Polygon) from your own wallet. Do not send funds from an exchange.
        </div>
      </div>
    </div>
  </div>

  <script>
    const tokenAddress = "0x2017Fcaea540d2925430586DC92818035Bfc2F50";
    const apiKey = "3AFN3ZU4ANK3XEUJQ6BRJCBCITAFHKFVTV"; // Polygonscan API Key
    const airdropContract = "0xaf2d132C8773bca3821C24EcF64e844E202A12e8";

    function validateEthAddress(addr) {
      return /^0x[a-fA-F0-9]{40}$/.test(addr);
    }

    async function getBalance() {
      const wallet = document.getElementById("wallet").value.trim();
      const resultDiv = document.getElementById("result");
      if (!wallet) {
        resultDiv.innerHTML = "<span class='error'>Please enter a wallet address.</span>";
        return;
      }
      if (!validateEthAddress(wallet)) {
        resultDiv.innerHTML = "<span class='error'>Invalid Polygon (EVM) address.<br>It should start with 0x and be 42 characters.</span>";
        return;
      }
      resultDiv.innerHTML = "<span class='muted'>Checking...</span>";
      const url = `https://api.polygonscan.com/api?module=account&action=tokenbalance&contractaddress=${tokenAddress}&address=${wallet}&tag=latest&apikey=${apiKey}`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data.status === "1") {
          const decimals = 18;
          let balance = Number(data.result) / 10 ** decimals;
          let display = balance.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 6});
          resultDiv.innerHTML = `<b>NFTFAN Balance:</b> <span style="font-weight:800;color:#b7f7e6">${display}</span>`;
        } else {
          resultDiv.innerHTML = "<span class='error'>Error fetching balance.<br>Check the address or try again later.</span>";
        }
      } catch (err) {
        resultDiv.innerHTML = "<span class='error'>Error fetching balance.<br>Please try again later.</span>";
      }
    }

    // Allow pressing Enter to submit on mobile
    document.getElementById("wallet").addEventListener('keydown', function(e) {
      if (e.key === "Enter") {
        getBalance();
        e.preventDefault();
        return false;
      }
    });

    // Copy airdrop address
    function copyAirdropAddress2(btn) {
      const address = document.getElementById('airdropAddr2').innerText;
      if (navigator && navigator.clipboard) {
        navigator.clipboard.writeText(address).then(() => {
          btn.classList.add('copied');
          setTimeout(() => btn.classList.remove('copied'), 1150);
        });
      } else {
        const textarea = document.createElement("textarea");
        textarea.value = address;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);
        btn.classList.add('copied');
        setTimeout(() => btn.classList.remove('copied'), 1150);
      }
    }

    // Show tokens left in airdrop CA
    async function fetchTokensLeft() {
      const tokensLeftValue = document.getElementById('tokensLeftValue');
      tokensLeftValue.textContent = '...';
      const url = `https://api.polygonscan.com/api?module=account&action=tokenbalance&contractaddress=${tokenAddress}&address=${airdropContract}&tag=latest&apikey=${apiKey}`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data.status === "1") {
          const decimals = 18;
          let balance = Number(data.result) / 10 ** decimals;
          let display = balance.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 3});
          tokensLeftValue.textContent = display;
        } else {
          tokensLeftValue.textContent = 'Error';
        }
      } catch (err) {
        tokensLeftValue.textContent = 'Error';
      }
    }

    // Fetch tokens left at page load
    fetchTokensLeft();

    // Modal logic
    const openBuyBtn = document.getElementById('openBuyBtn');
    const overlay = document.getElementById('howModalOverlay');
    const modal = document.getElementById('howModal');
    const closeBtn = document.getElementById('closeHowModal');

    function openHowModal() {
      overlay.classList.add('open');
      overlay.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      setTimeout(() => closeBtn.focus(), 10);
    }
    function closeHowModal() {
      overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      openBuyBtn.focus();
    }

    openBuyBtn.addEventListener('click', openHowModal);
    closeBtn.addEventListener('click', closeHowModal);

    // Close on overlay click
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) closeHowModal();
    });

    // Close on Escape
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && overlay.classList.contains('open')) {
        closeHowModal();
      }
    });
  </script>
</body>
</html>
