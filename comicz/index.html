<!DOCTYPE html>
<html>
<head>
  <title>LibGen Edition Pages - 20 per page with Grouped Dropdown</title>
  <style>
    body { font-family: sans-serif; }
    .container { max-width: 1200px; margin: 40px auto; }
    .selector { margin-bottom: 30px; }
    .grid { display: flex; flex-wrap: wrap; gap: 16px; }
    .cell { border: 1px solid #ccc; border-radius: 4px; overflow: hidden; width: 290px; background: #f9f9f9; }
    .cell iframe { width: 100%; height: 400px; border: none; }
    .cell .caption { padding: 8px; text-align: center; background: #f4f4f4; font-size: 0.9em; }
  </style>
</head>
<body>
  <div class="container">
    <h2>LibGen Edition Pages (20 per page, select range)</h2>
    <div class="selector">
      <label for="pageSelect">Select ID Range (20 per page): </label>
      <select id="pageSelect"></select>
    </div>
    <div class="grid" id="gallery"></div>
  </div>
  <script>
    const maxId = 74982;
    const perPage = 20;
    const pageSelect = document.getElementById('pageSelect');
    const gallery = document.getElementById('gallery');
    const totalPages = Math.ceil(maxId/perPage);

    // Fill the dropdown grouped by 1000s for easier navigation
    function populateDropdown() {
      let groupSize = 1000;
      for (let g = 0; g < maxId; g += groupSize) {
        let startG = g + 1;
        let endG = Math.min(g + groupSize, maxId);
        let optgroup = document.createElement('optgroup');
        optgroup.label = `IDs ${startG} - ${endG}`;
        // Add 20-per-page options within this group
        for (let i = startG; i <= endG; i += perPage) {
          let end = Math.min(i + perPage - 1, endG);
          let option = document.createElement('option');
          option.value = i;
          option.textContent = `IDs ${i} - ${end}`;
          optgroup.appendChild(option);
        }
        pageSelect.appendChild(optgroup);
      }
    }

    // Render 20 edition iframes
    function renderGallery(startId) {
      gallery.innerHTML = '';
      for (let i = 0; i < perPage && (startId + i) <= maxId; i++) {
        let eid = startId + i;
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.innerHTML = `
          <iframe src="https://libgen.li/edition.php?id=${eid}"></iframe>
          <div class="caption">Edition ID: ${eid}</div>
        `;
        gallery.appendChild(cell);
      }
    }

    // Initial setup
    populateDropdown();
    renderGallery(1);
    pageSelect.value = 1;

    // Change on dropdown
    pageSelect.onchange = function() {
      renderGallery(Number(pageSelect.value));
    };
  </script>
</body>
</html>
