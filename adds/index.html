<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Add Service · all nftfan services</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Google Material Icons -->
  <link
    href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
    rel="stylesheet"
  />

  <!-- Firebase (v9 compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <style>
    :root {
      --bg: #05060a;
      --bg-elevated: #111320;
      --accent: #5c7cfa;
      --accent-soft: rgba(92, 124, 250, 0.18);
      --accent-strong: rgba(92, 124, 250, 0.7);
      --text-main: #f5f5f8;
      --text-muted: #8f93b6;
      --border-subtle: rgba(255, 255, 255, 0.08);
      --radius-lg: 18px;
      --radius-md: 14px;
      --radius-pill: 999px;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.55);
      --blur: 18px;
      --font-main: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: var(--font-main);
      background: radial-gradient(circle at top, #141735 0, var(--bg) 52%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    .app-shell {
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
      padding: env(safe-area-inset-top, 16px) 14px
        calc(env(safe-area-inset-bottom, 18px) + 8px);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 8px 10px 6px;
      border-radius: var(--radius-pill);
      background: linear-gradient(
          135deg,
          rgba(92, 124, 250, 0.3),
          transparent 48%
        ),
        rgba(10, 12, 26, 0.94);
      border: 1px solid rgba(136, 148, 255, 0.35);
      box-shadow: 0 0 0 1px rgba(11, 14, 44, 0.8), var(--shadow-soft);
      backdrop-filter: blur(var(--blur));
    }

    .app-title-main {
      font-size: 9px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 700;
      color: #fdfdff;
      white-space: nowrap;
    }

    .app-title-sub {
      font-size: 8px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .app-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, #3b82f6 0, transparent 60%),
        rgba(14, 18, 42, 0.94);
      border: 1px solid rgba(148, 163, 255, 0.45);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
      font-size: 8px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-main);
    }

    .card {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 14px 12px 12px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top, rgba(92, 124, 250, 0.08), transparent 55%),
        linear-gradient(145deg, #070814 0, #05060a 55%, #04030a 100%);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(20px);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      padding: 0 2px;
    }

    .card-title {
      font-size: 9px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .card-pill {
      font-size: 8px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(148, 163, 255, 0.35);
      color: var(--text-main);
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 6px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 8px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    input {
      width: 100%;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 255, 0.35);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-main);
      font-size: 9px;
      outline: none;
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    input::placeholder {
      color: rgba(148, 163, 255, 0.55);
      font-size: 8px;
    }

    .icon-picker-wrapper {
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 255, 0.35);
      background: rgba(15, 23, 42, 0.96);
      padding: 6px 7px 7px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .icon-input-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .icon-input-row input {
      flex: 1;
      padding-left: 8px;
    }

    .icon-preview-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 7px;
      border-radius: 999px;
      border: 1px solid rgba(129, 140, 248, 0.6);
      background: radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.3), transparent 50%),
        rgba(15, 23, 42, 0.96);
      font-size: 8px;
      min-width: 0;
    }

    .material-icons-outlined {
      font-size: 16px;
      color: #e5e7eb;
    }

    .icon-list {
      max-height: 160px;
      overflow-y: auto;
      margin: 0 -5px -4px;
      padding: 2px 4px 4px;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 5px;
    }

    .icon-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      padding: 6px 3px;
      border-radius: 10px;
      border: 1px solid transparent;
      background: rgba(15, 23, 42, 0.96);
      cursor: pointer;
      font-size: 7px;
      color: var(--text-muted);
      text-transform: none;
      letter-spacing: 0.02em;
    }

    .icon-option .material-icons-outlined {
      font-size: 18px;
    }

    .icon-option span {
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .icon-option.selected {
      border-color: rgba(129, 140, 248, 0.9);
      background: radial-gradient(circle at 0 0, rgba(96, 165, 250, 0.4), transparent 55%),
        #020617;
      color: #e5e7eb;
    }

    .icon-list::-webkit-scrollbar {
      width: 3px;
    }
    .icon-list::-webkit-scrollbar-track {
      background: transparent;
    }
    .icon-list::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 255, 0.6);
      border-radius: 999px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .btn {
      flex: 1;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(129, 140, 248, 0.7);
      background: radial-gradient(circle at 0 0, rgba(96, 165, 250, 0.4), transparent 55%),
        linear-gradient(135deg, #0f172a, #020617);
      color: var(--text-main);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      text-align: center;
      cursor: pointer;
      box-shadow: 0 14px 32px rgba(0, 0, 0, 0.6);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }

    .btn.secondary {
      border-color: rgba(148, 163, 255, 0.4);
      background: rgba(15, 23, 42, 0.96);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.7);
    }

    .btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.8);
    }

    .status {
      margin-top: 8px;
      font-size: 8px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
      min-height: 10px;
    }

    .status.ok {
      color: #4ade80;
    }

    .status.err {
      color: #f97373;
    }

    @media (max-width: 360px) {
      input {
        font-size: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div>
        <div class="app-title-main">all nftfan services</div>
        <div class="app-title-sub">add new service</div>
      </div>
      <div class="app-badge">
        <span class="material-icons-outlined" style="font-size:14px;">add_circle</span>
        new service
      </div>
    </header>

    <main class="card">
      <div class="card-header">
        <span class="card-title">service details</span>
        <span class="card-pill">fill & save</span>
      </div>

      <form id="serviceForm">
        <div class="field-group">
          <label for="name">Service Name</label>
          <input
            id="name"
            type="text"
            placeholder="e.g. Marketplace"
            autocomplete="off"
            required
          />
        </div>

        <div class="field-group">
          <label for="url">Service URL</label>
          <input
            id="url"
            type="url"
            placeholder="https://..."
            autocomplete="off"
            required
          />
        </div>

        <div class="field-group">
          <label for="iconInput">Material Icon (thousands supported)</label>
          <div class="icon-picker-wrapper">
            <div class="icon-input-row">
              <input
                id="iconInput"
                type="text"
                placeholder="type to search icons, e.g. wallet, rocket, chart..."
                autocomplete="off"
              />
              <div class="icon-preview-pill" id="iconPreview" style="display:none;">
                <span class="material-icons-outlined" id="iconPreviewIcon">apps</span>
                <span id="iconPreviewName" style="max-width:90px;overflow:hidden;text-overflow:ellipsis;"></span>
              </div>
            </div>

            <div class="icon-list" id="iconList">
              <!-- icons will be rendered by JS -->
            </div>
          </div>
        </div>

        <div class="btn-row">
          <button type="button" class="btn secondary" id="backBtn">
            <span class="material-icons-outlined" style="font-size:14px;">arrow_back</span>
            back
          </button>
          <button type="submit" class="btn">
            <span class="material-icons-outlined" style="font-size:14px;">save</span>
            save
          </button>
        </div>

        <div class="status" id="status"></div>
      </form>
    </main>
  </div>

  <script>
    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBuBB-Cha7eLG1O7SxOTfFt8e6hVAWjkxI",
      authDomain: "tokentransfer-4a9b3.firebaseapp.com",
      databaseURL: "https://tokentransfer-4a9b3-default-rtdb.firebaseio.com",
      projectId: "tokentransfer-4a9b3",
      storageBucket: "tokentransfer-4a9b3.firebasestorage.app",
      messagingSenderId: "205455490321",
      appId: "1:205455490321:web:9919f5dde059316c9320b0",
      measurementId: "G-Y6CVEDL9XH"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ================= ICON PICKER =================

    // This list can contain hundreds/thousands of Material Icons.
    // Add more names here whenever you want – the UI will handle it.
    const MATERIAL_ICONS = [
      // Core ones you already use
      "storefront","account_balance_wallet","insights","card_giftcard",
      "rocket_launch","pie_chart","lock","grid_view","menu_book",
      "support_agent","forum","alternate_email","article","gavel","code",
      // Common UI / crypto / finance / social etc. (partial list – extend as you like)
      "home","apps","dashboard","widgets","extension","language","bolt",
      "token","paid","savings","trending_up","trending_down","swap_horiz",
      "swap_vert","bar_chart","leaderboard","show_chart","timeline",
      "analytics","area_chart","donut_small","donut_large","pie_chart_outline",
      "currency_bitcoin","currency_exchange","currency_franc","currency_lira",
      "currency_pound","currency_ruble","currency_rupee","currency_yen",
      "currency_yuan","attach_money","euro","money","account_balance",
      "account_circle","person","group","groups","verified","shield",
      "shield_person","shield_lock","security","key","vpn_key","fingerprint",
      "lock_open","lock_person","admin_panel_settings","settings","tune","build",
      "build_circle","bug_report","terminal","developer_mode","data_object",
      "code_blocks","api","link","link_off","share","share_arrival_time",
      "qr_code","qr_code_2","qr_code_scanner","wallet","payments","credit_card",
      "redeem","card_membership","shopping_bag","shopping_basket","shopping_cart",
      "local_mall","loyalty","favorite","favorite_border","star","star_border",
      "star_half","thumb_up","thumb_down","whatshot","bolt","flare","explore",
      "explore_off","map","travel_explore","public","wifi_tethering","hub",
      "cloud","cloud_download","cloud_upload","cloud_sync","cloud_done","cloud_off",
      "storage","dns","router","cast","satellite_alt","signal_cellular_alt",
      "token","account_tree","hub","waterfall_chart","insights",
      "notifications","notifications_active","campaign","schedule","event",
      "history","update","pending","hourglass_bottom","hourglass_top",
      "auto_awesome","sparkles","blur_on","blur_circular","blur_linear",
      "gradient","grain","hexagon","pentagon","circle","square","diamond",
      "rocket","science","lightbulb","psychology","psychology_alt",
      "support","help","help_center","headset_mic","forum","question_answer",
      "contact_support","live_help","chat","chat_bubble","sms","mail","send",
      "mark_email_read","mark_email_unread","drafts","inbox",
      // Add as many more as you want...
    ];

    const form = document.getElementById("serviceForm");
    const statusEl = document.getElementById("status");
    const backBtn = document.getElementById("backBtn");

    const iconInput = document.getElementById("iconInput");
    const iconListEl = document.getElementById("iconList");
    const iconPreview = document.getElementById("iconPreview");
    const iconPreviewIcon = document.getElementById("iconPreviewIcon");
    const iconPreviewName = document.getElementById("iconPreviewName");

    let selectedIcon = "";
    let filteredIcons = MATERIAL_ICONS.slice(0, 120); // initial slice for performance

    function renderIconList() {
      iconListEl.innerHTML = "";
      filteredIcons.forEach(name => {
        const div = document.createElement("div");
        div.className = "icon-option" + (name === selectedIcon ? " selected" : "");
        div.dataset.icon = name;

        const iconEl = document.createElement("span");
        iconEl.className = "material-icons-outlined";
        iconEl.textContent = name;

        const labelEl = document.createElement("span");
        labelEl.textContent = name;

        div.appendChild(iconEl);
        div.appendChild(labelEl);

        div.addEventListener("click", () => {
          selectedIcon = name;
          iconInput.value = name;
          updateIconPreview();
          renderIconList();
        });

        iconListEl.appendChild(div);
      });
    }

    function updateIconPreview() {
      if (!selectedIcon) {
        iconPreview.style.display = "none";
        return;
      }
      iconPreviewIcon.textContent = selectedIcon;
      iconPreviewName.textContent = selectedIcon;
      iconPreview.style.display = "inline-flex";
    }

    function filterIcons(query) {
      const q = query.trim().toLowerCase();
      if (!q) {
        filteredIcons = MATERIAL_ICONS.slice(0, 160);
      } else {
        filteredIcons = MATERIAL_ICONS.filter(name => name.toLowerCase().includes(q)).slice(0, 160);
      }
      renderIconList();
    }

    iconInput.addEventListener("input", () => {
      const value = iconInput.value;
      // live filter
      filterIcons(value);

      // if user typed exact icon name, select it
      if (MATERIAL_ICONS.includes(value)) {
        selectedIcon = value;
      } else {
        selectedIcon = "";
      }
      updateIconPreview();
    });

    backBtn.addEventListener("click", () => {
      // adjust to your main page path
      window.location.href = "index.html";
    });

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      statusEl.textContent = "";
      statusEl.classList.remove("ok", "err");

      const name = document.getElementById("name").value.trim();
      const url = document.getElementById("url").value.trim();
      const iconName = selectedIcon || iconInput.value.trim();

      if (!name || !url || !iconName) {
        statusEl.textContent = "please fill all fields and choose an icon.";
        statusEl.classList.add("err");
        return;
      }

      try {
        const ref = db.ref("services").push();
        await ref.set({
          name,
          url,
          icon: iconName, // this is the Material Icons name
          createdAt: Date.now()
        });

        statusEl.textContent = "service saved.";
        statusEl.classList.add("ok");
        form.reset();
        selectedIcon = "";
        updateIconPreview();
        filterIcons(""); // reset icon list
      } catch (err) {
        console.error(err);
        statusEl.textContent = "error saving service.";
        statusEl.classList.add("err");
      }
    });

    // initial render
    filterIcons("");
  </script>
</body>
</html>
